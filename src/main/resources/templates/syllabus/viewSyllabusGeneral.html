<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/Bootstrap%205/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="/js/Bootstrap%205/bootstrap.bundle.min.js"></script>
    <script src="/js/JQuery/jquery-3.7.1.js"></script>
    <link href="/css/select2/select2.css" rel="stylesheet"/>
    <script src="/js/select2/select2.min.js"></script>
    <link href="/css/DataTable/jquery.dataTables.css" rel="stylesheet">
    <script src="/js/DataTable/jquery.dataTables.js"></script>
    <link href="/css/user.css" rel="stylesheet" >
    <link href="/css/syllabus/createSyllabusGeneral.css" rel="stylesheet" >
    <link href="/css/syllabus/createSyllabusGeneral.css" rel="stylesheet" >
    <link rel="shortcut icon" type="image/png" href="img/FPT_logo.png"/>
    <link href='https://fonts.googleapis.com/css?family=Inter' rel='stylesheet'>

    <title>Document</title>
</head>
<body>
<header class="bg-main text-white px-5 py-1" >
    <div th:replace="~{common :: header}"></div>
</header>
<script>

    // const queryString = window.location.search;
    // const urlParams = new URLSearchParams(queryString);
    //
    // // Get the value of the "topicCode" parameter
    // const topicCode = urlParams.get('topicCode');
    // localStorage.setItem("topicCode", topicCode);

 var topicCode = localStorage.getItem("topicCode");



    $(document).ready(function() {

        console.log(localStorage.getItem("topicCode"));
        loadData();


    });

    function loadData() {
        $.ajax({
            url: 'http://localhost:8080/api/v1/syllabus/getGeneralScreen/' + topicCode
            ,type: 'GET',
            success: function (rs) {
                console.log(rs);
                loadSyllabus(rs);
                $('#topicCode').html(rs.topicCode);
                $('#version').html(rs.version);
                console.log(rs.level)
                console.log(rs.assignment)

            }



        });



    function loadSyllabus(rs){
        document.getElementById('syllabus-name').value = rs.topicName;
        const levelSelect = document.getElementById('level');
        const options = levelSelect.getElementsByTagName('option');
        for (let i = 0; i < options.length; i++) {
            if (options[i].value === rs.level) {
                options[i].selected = true;
                break; // Exit the loop once the matching option is found
            }
        }
        document.getElementById('attendee-number').value = rs.trainingAudience;
        document.getElementById('tech-reqs').value = rs.technicalGroup;
        document.getElementById('assignment').innerHTML = rs.assignment + "%";
        document.getElementById('quiz').innerHTML = rs.quiz + "%";
        document.getElementById('final').innerHTML = rs.finalTest + "%";
        document.getElementById('final_theory').innerHTML = rs.finalTheory + "%";
        document.getElementById('final_practice').innerHTML = rs.finalPractice + "%";
        document.getElementById('gpa').innerHTML = rs.gpa + "%";

        const data = {
            labels: ['Assignment', 'Quiz', 'Final', 'Final Theory', 'Final Practice', 'GPA'],
            datasets: [{
                data: [rs.assignment, rs.quiz, rs.finalTest, rs.finalTheory, rs.finalPractice, rs.gpa],
                backgroundColor: ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff']
            }]
        };

        console.log(data);

        const options1 = {
            responsive: true
        };

        const ctx = document.getElementsByClassName('doughnut').getContext('2d');
        new Chart(ctx, {
            type: 'doughnut',
            data: data,
            options: options1
        });

    }






    }




</script>

<div class="d-flex flex-grow-1 flex-row">
    <div th:replace="~{common :: menu}"></div>

    <div class="frame-1193">
        <div class="program-header">
            <div class="frame-1191">
                <div class="syllabus">Syllabus</div>
                <div class="progress-bar">
                    <div class="label">
                        <div class="bar">
                            <div class="progress-bar2">
                                <div class="ellipse-offset-to-get-to-the-middle">
                                    <div class="ellipse">
                                    </div>
                                </div>
                                <div class="spacer"></div>
                            </div>

                        </div>
                        <div class="padding">
                            <div class="text">General</div>
                        </div>
                    </div>
                    <div class="label">
                        <div class="bar2" style="z-index: 99">
                            <div class="progress-bar1">
                            </div>
                            <div class="spacer"></div>
                        </div>
                        <div class="padding">
                            <div class="text">Outline</div>
                        </div>
                    </div>
                    <div class="label">
                        <div class="bar2">
                            <div class="progress-bar1"></div>
                        </div>
                        <div class="padding">
                            <div class="text2">Other</div>
                        </div>
                    </div>
                    <div class="label">
                        <div class="bar3">
                            <div class="progress-bar1"></div>
                        </div>
                        <div class="padding">
                            <div class="text">Done</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="basic-info">
            <div class="syllabus-name-code">
                <div class="req-text-box">
                    <div class="text3">Syllabus Name*</div>
                    <div class="input">
                        <input disabled type="text" id="syllabus-name" class="input-syllabus-name" style="color: #0c0c0c; width: 100%; border: none; outline: none">
                    </div>
                </div>
                <div class="req-text-box">
                    <div class="text3">Code</div>
                    <div class="text3" id="topicCode"></div>
                </div>
                <div class="req-text-box">
                    <div class="text3">Version</div>
                    <div class="text3" id="version"></div>
                </div>
            </div>
        </div>
        <div class="frame-1196">
            <div class="frame-1192">
                <div class="content">
                    <div class="syllabus-name">
                        <div class="syllabus-tab">
                            <div class="frame-5115">
                                <a th:href="@{/viewSyllabusGeneral}"  style="text-decoration: none">
                                    <div class="tab-1">
                                        <div class="general">General</div>
                                    </div>
                                </a>
                                <a th:href="@{/viewSyllabusOutline}" style="text-decoration: none">
                                    <div class="tab-2">
                                        <div class="frame-51">
                                            <div class="tab-22">Outline</div>
                                        </div>
                                    </div>
                                </a>
                                <a th:href="@{/viewSyllabusOther}" style="text-decoration: none">
                                    <div class="tab-3">
                                        <div class="frame-51">
                                            <div class="tab-22">Other</div>
                                        </div>
                                    </div>
                                </a>

                            </div>
                            <div class="line-4"></div>
                        </div>
                    </div>
                    <div class="general2">
                        <div class="knowledge-req">
                            <div class="req-text-box2">
                                <div class="text3">Level</div>
                                <div class="dropdown-box">
                                    <select id="level" name="colors" class="combo-box" style="color: #0c0c0c; border: none; outline: none; transition: .5s ease" disabled="">
                                        <option value="" style="font-size: .8em">BEGINNER</option>
                                        <option value="ADVANCED" style="font-size: .8em">ADVANCED</option>
                                        <option value="" style="font-size: .8em">ALL_LEVEL</option>
                                    </select>
                                </div>
                            </div>
                            <div class="req-text-box3">
                                <div class="text3">Attendee number</div>
                                <div class="input2">
                                    <input disabled type="number" name="" id="attendee-number" style="color: #0c0c0c; width: 100%; border: none; outline: none">
                                </div>
                            </div>
                        </div>
                        <div class="tech-req">
                            <div class="req-text-box4">
                                <div class="text3">Technical Requirement(s)</div>
                                <textarea disabled id="tech-reqs" class="scrollable-textarea" style="color: #0c0c0c"></textarea>
                            </div>
                        </div>
                        <div class="objectives">
                            <div class="req-text-box4">
                                <div class="req-text-box3">
                                    <div class="text3">Course Objectives</div>
                                    <div class="input2 course" style="position:relative;">
                                        <input type="text" name="" id="LearningObjectiveName" style="width: 100%; border: none; outline: none" onblur="showPlaceholder()" onfocus="hidePlaceholder()">
                                        <p id="placeholderText" style="white-space: nowrap;">Course Objective Name</p>
                                    </div>
                                </div>
                                <textarea id="course-obj" class="scrollable-textarea" name="textarea"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="frame-1190">
                    <div class="basic-info2">
                        <div class="syllabus-name-code2">
                            <div class="version"></div>
                        </div>
                    </div>
                    <div class="frame-11902">
                        <div class="time-allocation">
                            <div class="time-allocation2">Time allocation</div>
                        </div>
                        <div class="content2">
                            <div class="doughnut">
                                <div class="_01"></div>
                                <div class="_02"></div>
                                <div class="_03"></div>
                                <div class="_04"></div>
                                <div class="_05"></div>
                                <div class="_06"></div>
                            </div>
                            <div class="info">
                                <div class="frame-108">
                                    <div class="bullet">
                                        <div class="rectangle-644"></div>
                                    </div>
                                    <div class="frame-5116">
                                        <div class="assignment-lab">Assignment</div>
                                        <div class="text3" id="assignment"></div>
                                    </div>
                                </div>
                                <div class="frame-113">
                                    <div class="bullet">
                                        <div class="rectangle-6442"></div>
                                    </div>
                                    <div class="frame-51162">
                                        <div class="concept-lecture">Quiz</div>
                                        <div class="text3" id="quiz"></div>
                                    </div>
                                </div>
                                <div class="frame-114">
                                    <div class="bullet">
                                        <div class="rectangle-6443"></div>
                                    </div>
                                    <div class="frame-51162">
                                        <div class="guide-review">Final</div>
                                        <div class="text3" id="final"></div>
                                    </div>
                                </div>
                                <div class="frame-115">
                                    <div class="bullet">
                                        <div class="rectangle-6444"></div>
                                    </div>
                                    <div class="frame-51162">
                                        <div class="test-quiz">Final Theory</div>
                                        <div class="text3" id="final_theory"></div>
                                    </div>
                                </div>
                                <div class="frame-116">
                                    <div class="bullet">
                                        <div class="rectangle-6445"></div>
                                    </div>
                                    <div class="frame-51162">
                                        <div class="exam">Final Practice</div>
                                        <div class="text3" id="final_practice"></div>
                                    </div>
                                </div>
                                <div class="frame-116">
                                    <div class="bullet">
                                        <div class="rectangle-6445"></div>
                                    </div>
                                    <div class="frame-51162">
                                        <div class="exam">GPA</div>
                                        <div class="text3" id="gpa"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="frame-5119">
                <a th:href="@{/viewSyllabusOutline}" style="text-decoration: none; color: #eeecec">
                    <div class="filter2 save-btn">
                        Next Page
                    </div>
                </a>
            </div>
        </div>
    </div>

</div>

<div th:replace="~{common :: footer}"></div>

<script src="/js/common.js"></script>
<script src="/js/tinymce/script.js"></script>
<script src="/js/tinymce/tinymce.min.js"></script>

<script>
    function hidePlaceholder() {
        const placeholderText = document.getElementById("placeholderText");
        placeholderText.style.display = "none";
    }

    function showPlaceholder() {
        const inputElement = document.getElementById("LearningObjectiveName");
        if (inputElement.value === "") {
            const placeholderText = document.getElementById("placeholderText");
            placeholderText.style.display = "block";
        }
    }
</script>


</body>

</html>