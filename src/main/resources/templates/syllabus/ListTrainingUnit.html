<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/Bootstrap%205/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="/js/Bootstrap%205/bootstrap.bundle.min.js"></script>
    <script src="/js/JQuery/jquery-3.7.1.js"></script>
    <link href="/css/select2/select2.css" rel="stylesheet" />
    <script src="/js/select2/select2.min.js"></script>
    <link href="/css/DataTable/jquery.dataTables.css" rel="stylesheet">
    <script src="/js/DataTable/jquery.dataTables.js"></script>
    <link href="/css/user.css" rel="stylesheet" >
    <!--    <script src="/js/user.js"></script>-->
    <link rel="shortcut icon" type="image/png" href="img/FPT_logo.png"/>
    <link href='https://fonts.googleapis.com/css?family=Inter' rel='stylesheet'>
    <link rel="stylesheet" href="css/syllabus/createSyllabusOutline.css">

    <title>Document</title>
</head>
<body>
<header class="bg-main text-white px-5 py-1" >
    <div th:replace="~{common :: header}"></div>
</header>

<div class="d-flex flex-grow-1 flex-row">
    <div th:replace="~{common :: menu}"></div>

    <div class="frame-1186">
        <div class="program-detail">
            <div class="program-header">
                <div class="frame-1191">
                    <div class="training-program">Syllabus</div>
                    <!-- props: {"phase":{"type":"VARIANT","defaultValue":"'general'","variantOptions":["General","Outline","Done","Other"]}} -->
                    <div class="progress-bar">
                        <div class="label">
                            <div class="bar">
                                <div class="progress-bar2"></div>
                            </div>
                            <div class="padding">
                                <div class="text">General</div>
                            </div>
                        </div>
                        <div class="label">
                            <div class="bar2">
                                <div class="progress-bar2">
                                    <div class="ellipse-offset-to-get-to-the-middle">
                                        <div class="ellipse"></div>
                                    </div>
                                </div>
                                <div class="spacer"></div>
                            </div>
                            <div class="padding">
                                <div class="text">Outline</div>
                            </div>
                        </div>
                        <div class="label">
                            <div class="bar2">
                                <div class="progress-bar1"></div>
                            </div>
                            <div class="padding">
                                <div class="text2">Other</div>
                            </div>
                        </div>
                        <div class="label">
                            <div class="bar3">
                                <div class="progress-bar1"></div>
                            </div>
                            <div class="padding">
                                <div class="text">Done</div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="basic-info">
                <div class="syllabus-name-code">
                    <div class="req-text-box">
                        <div class="text3">Syllabus Name*</div>
                        <input type="text" id="syllabusNameInput" name="" value="" class="text-box" readonly>
                    </div>
                    <div class="req-text-box">
                        <div class="text3">Code:</div>
                        <div class="npl">NPL</div>
<!--                        <input type="hidden" id="syllabusCode" name="" value="" class="text-box" >-->
                    </div>
                    <div class="req-text-box">
                        <div class="text3">Version:</div>
                        <div class="_1-0">1.0</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="frame-1189">
            <div class="b-ody">
                <div class="syllabus-tab">
                    <div class="tab-3">
                        <div class="frame-51">
                            <div class="tab-2">Others</div>
                        </div>
                    </div>
                    <div class="tab-1">
                        <div class="frame-51">
                            <div class="general">General</div>
                        </div>
                    </div>
                    <div class="tab-22">
                        <div class="frame-51">
                            <div class="tab-2">Outline</div>
                        </div>
                    </div>
                </div>
                <div class="frame-1207">
                    <div class="frame-1192">
                        <div class="content">
                            <div class="day-3">
                                <div class="frame-1193"></div>
<!--                                <div class="frame-54"></div>-->

                                <div class="add-unit-button">
                                    <div class="add-day-button2">
                                        <svg
                                                class="add3"
                                                width="24"
                                                height="24"
                                                viewBox="0 0 24 24"
                                                fill="none"
                                                xmlns="http://www.w3.org/2000/svg"
                                        >
                                            <g clip-path="url(#clip0_1173_19892)">
                                                <path
                                                        d="M13 7H11V11H7V13H11V17H13V13H17V11H13V7ZM12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z"
                                                        fill="#F1F1F1"
                                                />
                                            </g>
                                            <defs>
                                                <clipPath id="clip0_1173_19892">
                                                    <rect width="24" height="24" fill="white" />
                                                </clipPath>
                                            </defs>
                                        </svg>

                                        <button class="add-unit">Add unit</button>
                                    </div>
                                </div>

                            </div>
                            <button class="add-day-button-2">
                                <div class="add-day-button3">
                                    <svg
                                            class="add3"
                                            width="24"
                                            height="24"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <g clip-path="url(#clip0_1173_19917)">
                                            <path
                                                    d="M13 7H11V11H7V13H11V17H13V13H17V11H13V7ZM12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z"
                                                    fill="#F1F1F1"
                                            />
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_1173_19917">
                                                <rect width="24" height="24" fill="white" />
                                            </clipPath>
                                        </defs>
                                    </svg>

                                    <div class="add-day">Add day</div>
                                </div>
                            </button>
                            <div class="rectangle-2487"></div>
                        </div>
                        <div class="rectangle-645"></div>
                    </div>
                </div>
            </div>
            <div class="frame-1190">
                <div class="time-allocation">
                    <div class="time-allocation2">Time allocation</div>
                </div>
                <div class="time-allocation3">
                    <div class="time-allocation2">Time allocation</div>
                </div>
                <div class="content2">
                    <div class="doughnut">
                        <div class="_01"></div>
                        <div class="_02"></div>
                        <div class="_03"></div>
                        <div class="_04"></div>
                    </div>
                    <div class="info">
                        <div class="frame-1082">
                            <div class="bullet">
                                <div class="rectangle-644"></div>
                            </div>
                            <div class="assignment-lab">Assignment/Lab</div>
                            <div class="_54">(54%)</div>
                        </div>
                        <div class="frame-109">
                            <div class="bullet">
                                <div class="rectangle-6442"></div>
                            </div>
                            <div class="concept-lecture5">Concept/Lecture</div>
                            <div class="_29">(29%)</div>
                        </div>
                        <div class="frame-110">
                            <div class="bullet">
                                <div class="rectangle-6443"></div>
                            </div>
                            <div class="guide-review2">Guide/Review</div>
                            <div class="_9">(9%)</div>
                        </div>
                        <div class="frame-1112">
                            <div class="bullet">
                                <div class="rectangle-6444"></div>
                            </div>
                            <div class="test-quiz">Test/Quiz</div>
                            <div class="_1">(1%)</div>
                        </div>
                        <div class="frame-112">
                            <div class="bullet">
                                <div class="rectangle-6445"></div>
                            </div>
                            <div class="exam">Exam</div>
                            <div class="_6">(6%)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="saving-button">
            <div class="frame-92">
                <div class="previous">Previous</div>
            </div>
            <div class="frame-1201">
                <div class="add-day-button4">
                    <div class="cancel">Cancel</div>
                </div>
                <div class="frame-91">
                    <div class="save">Save as draft</div>
                </div>
                <div class="frame-912">
                    <a th:href="@{/createSyllabusOtherScreen}" style="text-decoration: none; color: #eeecec">
                        <div class="next save-btn">
                            Next
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>


</div>

<div th:replace="~{common :: footer}"></div>

<script src="/js/common.js"></script>

<script>
    var topicCodedata;
    var api2;
    var selectedDay;
    var unitCodedata;
    var apiUrl2;

    $(document).ready(function() {
        // Event listener for the input field
        $('#syllabusNameInput').on('input', function() {
            var syllabusName = $(this).val();
            localStorage.setItem('syllabusName', syllabusName);
             loadData(syllabusName);
        });

        // Load data when the page is refreshed
        // var savedSyllabusName = localStorage.getItem('syllabusName');
        // console.log(savedSyllabusName);
        // if (savedSyllabusName) {
        //     $('#syllabusNameInput').val(savedSyllabusName);
        //     loadData(savedSyllabusName);
        // }

        // Event listener for adding a day
        $('.add-day-button-2').click(function() {
           addDay();
        });
        $(document).on('click', '.add', function () {
            $('.add').remove();
            getDeliveryType();
        });
    });
    function updateUnitNames(data) {
        var unitNames = data.unitName;
        var unitCodes = data.unitCode;
        const lastestUnitCode = unitCodes[unitCodes.length - 1];
        unitCodedata = lastestUnitCode;
        const lastestUnit = unitNames.length;
        var day1 = selectedDay;
        // var dayContainer = $('.frame-54');
        // $.each(unitNames, function (index, unitName) {
            var unitNameContainer = $('<div>',{
                class: 'unit-names-container',
                id: 'unit-names-container-' + day1
            });

            // var unitNamefield = $('<div>').
            var unitContainer = $('<div>').addClass('frame-108');

            var unitLabel = $('<div>', {
                class: 'unit-7',
                text: 'Unit ' + lastestUnit // You may need to adjust the index accordingly
            });

            var programContainer = $('<div>').addClass('frame-1199');

            var programName = $('<div>').addClass('program-name');

            var unitNameElement = $('<div>', {
                class: 'unit-name',
                text:'Unit Name'
            });
            var frame84 = $('<div>').addClass('frame-84');

            var typeUnitName = $('<input>', {
                class: 'type-unit-name styled-input',
                type: 'text',
                id: 'unitNameInput',
                placeholder: 'Type unit name',
                // value: unitName
            });

            var transferunitCode = $('<input>', {
                type: 'text',
                // id:'unitCode',
                class: 'unitCodee',
                value: lastestUnitCode
            });

            var frame66 = $('<div>').addClass('frame-66');

            var create = $('<button>', {
                class: 'create',
                text: 'Create'
            });
            var unitNamefield = $('<div>').addClass('frame-54 uday'+day1);
            // Assemble the structure
            frame66.append(create);
            frame84.append(typeUnitName);
            frame84.append(transferunitCode);
            frame84.append(frame66);
            programName.append(unitNameElement);
            programName.append(frame84);
            programContainer.append(programName);
            unitContainer.append(unitLabel);
            // unitContainer.append(programContainer);
            unitNameContainer.append(unitContainer);
            unitNameContainer.append(programContainer);
            unitNamefield.append(unitNameContainer);

            // Ẩn tất cả các ngày trước
            if($('.uday' + day1).length === 1){
                var link = $('.day-'+ day1);
                console.log(unitNamefield);
                link.append(unitNamefield);
                console.log("append dc");
            }
            // unitNamefield.append(addbtnAddunit());
            typeUnitName.on('change', function () {
                var typedUnitName = $(this).val();
                create.click(function () {
                    // $('.frame-1193').empty();
                    createUnitName(data,typedUnitName);
                    location.reload();
                    // loadTrainingUnit(data);
                });
            });

                function createUnitName(data, typedUnitName){
                    // var unitName = $("#unitNameInput").val();
                    var unitName = typedUnitName;
                    var topicCode = topicCodedata;
                    var dayNumber = selectedDay;
                    var unitCodes1 = data.unitCode;
                    const lastestUnitCode = unitCodes1[unitCodes1.length - 1];
                    unitCodedata = lastestUnitCode;

                    console.log("create: "+selectedDay);
                    // Second AJAX request to load unit names for the selected day
                    var apiUrl = 'http://localhost:8080/api/v1/syllabus/OutlineScreen/createTrainingUnit/' + topicCode + '/' + dayNumber + '/' + lastestUnitCode;
                    $.ajax({
                        url: apiUrl,
                        type: 'POST',
                        contentType: 'application/json', // Set the content type if needed
                        data: JSON.stringify({ unitName: unitName }), // Send the unitName as JSON data
                        success: function (data) {
                            // Handle the API response here
                            console.log('API response:', data);
                            // console.log(unitCode);
                            // You can perform additional actions as needed
                        },
                        error: function (error) {
                            // Handle any errors here
                            console.error('API error:', error);
                        }
                    });
                }
            // })

    }
    // Define a function to load data based on the syllabus name
    function loadData(syllabusName) {
        var apiUrl = 'http://localhost:8080/api/v1/syllabus/OutlineScreen/' + syllabusName;
        // First AJAX request to load syllabus data
        $.ajax({
            url: apiUrl,
            type: 'GET',
            success: function (data) {
                console.log(data);
                // Handle the successful response and update the HTML elements
                updateSyllabusData(data);
                api2 = 'http://localhost:8080/api/v1/syllabus/OutlineScreen/' + data.topicCode + '/';
            },
            error: function (error) {
                console.log('Error:', error);
            }
        });


    }
    function addUnitCode(){
        var topicCode1 = topicCodedata;
        var dayNumber1 = selectedDay;
        var apiUrl1 = 'http://localhost:8080/api/v1/syllabus/OutlineScreen/addTrainingUnitCode/'+ topicCode1 + '/' + dayNumber1;

        $.ajax(
            {
                url : apiUrl1,
                type : 'POST',

                success: function(response) {
                    // Handle the successful response or any additional actions
                    console.log(response);

                    // Reload the page after a successful request
                    // location.reload();
                },
                error: function(error) {
                    // Handle the error or any error-specific actions
                    console.log('Error:', error);
                }
            }
        )
    }
    function  addDay(){
        if (topicCodedata) {
            var syllabusCode = topicCodedata;
            var apiUrl2 = "http://localhost:8080/api/v1/syllabus/OutlineScreen/addDay/" + syllabusCode;
            $.ajax({
                url: apiUrl2,
                type: 'POST',
                success: function(response) {
                    // Handle the successful response or any additional actions
                    console.log(response);

                    // Reload the page after a successful request
                    location.reload();
                },
                error: function(error) {
                    // Handle the error or any error-specific actions
                    console.log('Error:', error);
                }
            });
        }
    }

    // Cập nhật ngày được chọn và thực hiện AJAX request
    function updateSelectedDay(selectedDay, data) {
        var updatedApi2 = api2 + selectedDay;
        apiUrl2 = 'http://localhost:8080/api/v1/syllabus/OutlineScreen/' + data.topicCode + '/' + selectedDay;
        // Second AJAX request to load unit names for the selected day
        $.ajax({
            url: updatedApi2,
            type: 'GET',
            success: function (data) {
                // Handle the successful response and update the HTML elements
                // updateUnitNames(data);
                
                loadTrainingUnit(data);
                // createTrainingUnit(data);
            },
            error: function (error) {
                console.log('Error:', error);
            }
        });
    }
    // Get again the unitCode when add unit
    function getGeneratedCode(selectedDay) {
        var topicCode = topicCodedata;
        apiUrl2 = 'http://localhost:8080/api/v1/syllabus/OutlineScreen/' + topicCode + '/' + selectedDay;
        // Second AJAX request to load unit names for the selected day
        $.ajax({
            url: apiUrl2,
            type: 'GET',
            success: function (data) {
                updateUnitNames(data);
            },
            error: function (error) {
                console.log('Error:', error);
            }
        });
    }
    // Function to update the unit names
    function createClickableRemoveIcon() {
        var svgElement = $('<svg>', {
            class: 'remove-circle-outline',
            width: '24',
            height: '24',
            viewBox: '0 0 24 24',
            fill: 'none',
            'xmlns:xlink': 'http://www.w3.org/2000/svg',
        });

        var clipPathElement = $('<clipPath>', {
            id: 'clip0_1173_20029',
        }).append($('<rect>', {
            width: '24',
            height: '24',
            fill: 'white',
        }));

        var pathElement = $('<path>', {
            d: 'M7 11V13H17V11H7ZM12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z',
            fill: '#E74A3B',
        });

        svgElement.append(clipPathElement);
        svgElement.append(pathElement);

        // Add a click event listener to the icon
        svgElement.click(function() {
            // Handle the click event here
            // You can access information related to the clicked "Day" div
            // You can use $(this) to refer to the clicked icon
        });

        return svgElement;
    }
    function updateSyllabusData(data) {
        topicCodedata = data.topicCode;
        var versiondata = data.version;
        var days = data.dayNumber; // Assuming this is an array of days

        // Loại bỏ các giá trị ngày trùng lặp
        var uniqueDays = Array.from(new Set(days.flat()));

        // Sử dụng mảng không trùng lặp
        var addedDays = [];

        // Xóa tất cả nút "Day" cũ trước khi thêm nút mới
        var daymainField = $('.frame-1193');
        daymainField.empty();

        for (var i = 0; i < uniqueDays.length; i++) {
            var day = uniqueDays[i];

            // Kiểm tra xem ngày đã được thêm chưa
            if (!addedDays.includes(day)) {
                addedDays.push(day); // Thêm ngày vào mảng

                var dayfield = $('<button>').addClass('day num'+ day).text('Day ' + day);
                var clickableIcon = createClickableRemoveIcon(); // Create the clickable icon
                dayfield.append(clickableIcon);
                var dayContainer = $('<div>').addClass('day-container day-'+ day);
                var addclass1 = $('<button>').addClass('frame-48');
                var addclass2 = $('<div>').addClass('frame-512');
                var addclass3 = $('<div>').addClass('frame-513');

                addclass3.append(dayfield);
                addclass2.append(addclass3);
                addclass1.append(addclass2);
                dayContainer.append(addclass1);
                // dayContainer.append(unitNamefield);
                daymainField.append(dayContainer);


                // Biến để theo dõi "Day" đang được hiển thị
                // var currentDay = null;
                // if ($('.frame-54').length === 1) {
                //     $('.frame-54:first').empty();
                // }

                // Attach the click event to the newly created day buttons
                dayfield.click(function () {
                    $('.frame-54').remove();
                    selectedDay = $(this).text().replace('Day ', '');
                    updateSelectedDay(selectedDay, data);
                    $('.unit-names-container').hide();
                    var unitNamefield = $('<div>').addClass('frame-54 uday'+selectedDay);
                    day = selectedDay;
                    // Ẩn tất cả các ngày trước
                    if($('.uday' + day).length === 0){
                        var link = $('.day-'+ day);
                        console.log(unitNamefield);
                        link.append(unitNamefield);
                        console.log("append dc");
                    }



                    // dayContainer.append(unitNamefield);
                    // $('.day').each(function () {
                    //     var dayNumber = $(this).text().replace('Day ', '');
                    //     if (dayNumber !== selectedDay) {
                    //         // Ẩn ngày
                    //     }
                    // });
                    // Cập nhật biến "currentDay"
                    currentDay = selectedDay;
                });
            }
        }

        var topicCodefield = $('.npl');
        var versionfield = $('._1-0');

        topicCodefield.empty().text(topicCodedata);
        versionfield.empty().text(versiondata);
    }
    function loadTrainingUnit(data) {
        var unitNames1 = data.unitName;
        var unitCodes1 = data.unitCode;
        console.log(unitCodes1);
        var day = selectedDay;
        var unitNamefield = $('.uday'+day);
        $('.unit-names-container').hide();


        $.each(unitNames1, function (index, unitName1) {
            var unitNameContainer = $('<div>',{
                class: 'unit-names-container',
                id: 'unit-names-container-' + selectedDay
            });
            var unitContainer = $('<div>').addClass('frame-108');
            var unitLabel = $('<div>', {
                class: 'unit-7',
                text: 'Unit ' + (index + 1)
            });

            var programContainer = $('<div>').addClass('frame-1199');
            var programName = $('<div>').addClass('program-name');
            var unitNameElement1 = $('<div>', {
                class: 'unit-name',
                text:'Unit Name'
            });
            var unitNameElement = $('<div>', {
                class: 'unit-7',
                text: unitName1 // Display the unit name
            });


            // Assemble the structure
            programName.append(unitNameElement);
            programContainer.append(programName);
            unitContainer.append(unitLabel);
            unitNameContainer.append(unitContainer);
            unitNameContainer.append(programContainer);
            unitNamefield.append(unitNameContainer);

        });


        $('.add-unit').click(function() {
            addUnitCode();
            setTimeout(() => {
                getGeneratedCode(selectedDay);
            }, 30);

        });
        getTrainingContent(unitCodes1);
        setTimeout(() => {
            var addDiv = $('<button>').addClass('add');
            unitNamefield.append(addDiv);
        },20);
    }
    function getTrainingContent(unitCode1) {
        var topicCode = topicCodedata;
        var day = selectedDay;
        var unitCode2 = unitCode1
        apiUrl2 = 'http://localhost:8080/api/v1/syllabus/OutlineScreen/' + topicCode + '/' + day + '/' + unitCode2;
        // Second AJAX request to load unit names for the selected day
        $.ajax({
            url: apiUrl2,
            type: 'GET',
            success: function (data) {
                updateTrainingContent(data);
            },
            error: function (error) {
                console.log('Error:', error);
            }
        });
    }
    function updateTrainingContent(data){
        var contents = data.content;
        var Id = data.trainingContentId;
        var duration = data.duration;
        var format= data.trainingFormat
        var day = selectedDay;
        var deliveryTypes = data.deliveryType;
        var unitNamefield = $('.uday'+day);
        $.each(contents, function (index, contentItem) {
            var trainingContentContainer = $('<div>').addClass('frame-41');
            var trainingContentName = $('<div>', {
                class: 'operators',
                text: contentItem
            });
            // Use console.log for debugging
            console.log(contentItem);
            var trainingContentdetailContainer = $('<div>').addClass('frame-40');
            var trainingContentIdContainer = $('<div>').addClass('frame-95');
            var trainingContentId = $('<div>', {
                class: 'h-4-sd',
                text: Id[index]
            });
            var trainingContentDuration = $('<div>', {
                class: '_30-mins',
                text: duration[index]
            });
            // var trainingContentFormatContain = $('<div>').addClass('online');
            // var trainingContentFormat = $('<div>', {
            //     class: 'online2',
            //     text: format[index]
            // });
            var type = deliveryTypes[index];
            var addfolder = $('<button>').addClass('folder-btn');
            trainingContentIdContainer.append(trainingContentId);
            // trainingContentFormatContain.append(trainingContentFormat);
            // trainingContentdetailContainer.append(trainingContentIdContainer, trainingContentDuration, trainingContentFormatContain);
            trainingContentdetailContainer.append(trainingContentIdContainer, trainingContentDuration, createdivTrainingFormat(format[index]));
            trainingContentContainer.append(trainingContentName, trainingContentdetailContainer,createIconfordeliverType(type),addfolder);
            unitNamefield.append(trainingContentContainer);
        });
    }
    function addTrainingContent(data){
        var day = selectedDay;
        var unitNamefield = $('.uday'+day);
        // Create main container
        var mainContainer = $('<div>').addClass('frame-41');

        // Create nested containers
        var frame1197 = $('<div>').addClass('frame-1197');
        var practiceTime = $('<input>').addClass('practice-time').attr('placeholder','Training Content Name').attr('id','Content-Name');
        frame1197.append(practiceTime);

        // var frame40 = $('<div>').addClass('frame-40');

// Create delivery type container
        var deliveryType = $('<div>').addClass('delivery-type');
        var frame111 = $('<div>').addClass('frame-111');
        var deliveryType2 = $('<select>').addClass('delivery-type2').attr('id', 'output-standard');
// Adding options to the select element
        data.forEach(function (contentType) {
            var option = $('<option>').val(contentType).text(contentType);
            deliveryType2.append(option);
        });

// Appending options to the select element
        var arrowBackIos = $('<svg>').addClass('arrow-back-ios')
            .attr({
                width: '24',
                height: '24',
                viewBox: '0 0 24 24',
                fill: 'none',
                xmlns: 'http://www.w3.org/2000/svg'
            });
        var arrowBackIosPath = $('<path>').attr('d', 'M7.16212 8L6 9.0677L12.5 15L19 9.0617L17.8379 8L12.5 12.8766L7.16212 8Z').attr('fill', '#285D9A');
        arrowBackIos.append(arrowBackIosPath);
        frame111.append(deliveryType2, arrowBackIos);
        deliveryType.append(frame111);

// Other elements in frame40
        var frame1198 = $('<div>').addClass('frame-1198');
        var _15 = $('<div>').addClass('_15').text('15');
        frame1198.append(_15);

        var toggleOnline = $('<div>').addClass('toggle-online');
        var ellipse19 = $('<div>').addClass('ellipse-19');
        var online = $('<div>').addClass('online-add').text('Online');
        toggleOnline.append(ellipse19, online);

// Another delivery type container
        var deliveryType2 = $('<div>').addClass('delivery-type');
        var frame111_2 = $('<div>').addClass('frame-111');
        var deliveryType2_2 = $('<div>').addClass('delivery-type2').text('Delivery type');
        var arrowBackIos2 = $('<svg>').addClass('arrow-back-ios2')
            .attr({
                width: '25',
                height: '24',
                viewBox: '0 0 25 24',
                fill: 'none',
                xmlns: 'http://www.w3.org/2000/svg'
            });
        var arrowBackIosPath2 = $('<path>').attr('d', 'M7.91212 8L6.75 9.0677L13.25 15L19.75 9.0617L18.5879 8L13.25 12.8766L7.91212 8Z').attr('fill', '#285D9A');
        arrowBackIos2.append(arrowBackIosPath2);
        frame111_2.append(deliveryType2_2, arrowBackIos2);
        deliveryType2.append(frame111_2);
        var addfolder = $('<button>').addClass('folder-btn');

// Append everything to the main container
//         frame40.append(deliveryType, frame1198, toggleOnline, deliveryType2, addfolder);
        mainContainer.append(frame1197, deliveryType, frame1198, toggleOnline, deliveryType2, addfolder);
// Append main container to the body or any other parent element
        unitNamefield.append(mainContainer);
        var addDiv = $('<button>').addClass('add');
        unitNamefield.append(addDiv);
    }
    function createdivTrainingFormat(format1){
        var trimmedFormat = format1.toString().trim();
        switch (trimmedFormat) {
            case 'ONLINE':
                return $('<div>').addClass('online').append($('<div>', {
                    class: 'online2',
                    text: trimmedFormat
                }));
                break;
            case 'OFFLINE':
                return $('<div>').addClass('offline').append(
                    $('<div>', {
                        class: 'offline2',
                        text: trimmedFormat
                    }));
                break;
        }
    }
    function createIconfordeliverType(deliverType){
        let svg = null;
        var type = deliverType.toString().trim()
        switch (type){
            case 'Assignment_Lab':
                svg = $('<svg class="assignment-lab" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_750_12228)"><path d="M18 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V4C20 2.9 19.1 2 18 2ZM9 4H11V9L10 8.25L9 9V4ZM18 20H6V4H7V13L10 10.75L13 13V4H18V20Z" fill="#285D9A"/></g><defs><clipPath id="clip0_750_12228"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>');
                break;
            case 'Concept_Lecture':
                svg = $('<svg class="assignment-lab" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_750_12232)"><path d="M9 13C11.21 13 13 11.21 13 9C13 6.79 11.21 5 9 5C6.79 5 5 6.79 5 9C5 11.21 6.79 13 9 13ZM9 7C10.1 7 11 7.9 11 9C11 10.1 10.1 11 9 11C7.9 11 7 10.1 7 9C7 7.9 7.9 7 9 7ZM9 15C6.33 15 1 16.34 1 19V21H17V19C17 16.34 11.67 15 9 15ZM3 19C3.22 18.28 6.31 17 9 17C11.7 17 14.8 18.29 15 19H3ZM15.08 7.05C15.92 8.23 15.92 9.76 15.08 10.94L16.76 12.63C18.78 10.61 18.78 7.56 16.76 5.36L15.08 7.05ZM20.07 2L18.44 3.63C21.21 6.65 21.21 11.19 18.44 14.37L20.07 16C23.97 12.11 23.98 6.05 20.07 2Z" fill="#285D9A"/></g><defs><clipPath id="clip0_750_12232"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>');
                break;
            case 'Guide_Review':
                svg = $('<svg class="assignment-lab" width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_750_12236)"><path d="M17.25 23H10.9729C9.93794 23 8.9221 22.5687 8.20335 21.8212L1.20752 14.5283L3.19127 12.7746C3.78544 12.2475 4.65752 12.1421 5.3571 12.5158L7.66669 13.7425V4.59042C7.66669 3.26792 8.74002 2.19458 10.0625 2.19458C10.2254 2.19458 10.3884 2.21375 10.5513 2.2425C10.6375 0.996666 11.6725 0.00958252 12.9375 0.00958252C13.7617 0.00958252 14.4804 0.421666 14.9117 1.05417C15.1896 0.939166 15.4963 0.881666 15.8125 0.881666C17.135 0.881666 18.2084 1.955 18.2084 3.2775V3.54583C18.3617 3.51708 18.5246 3.49792 18.6875 3.49792C20.01 3.49792 21.0834 4.57125 21.0834 5.89375V19.1667C21.0834 21.2846 19.3679 23 17.25 23ZM3.96752 14.6433L9.58335 20.4892C9.94752 20.8629 10.4459 21.0833 10.9634 21.0833H17.25C18.3042 21.0833 19.1667 20.2208 19.1667 19.1667V5.89375C19.1667 5.62542 18.9559 5.41458 18.6875 5.41458C18.4192 5.41458 18.2084 5.62542 18.2084 5.89375V11.5H16.2917V3.2775C16.2917 3.00917 16.0809 2.79833 15.8125 2.79833C15.5442 2.79833 15.3334 3.00917 15.3334 3.2775V11.5H13.4167V2.40542C13.4167 2.13708 13.2059 1.92625 12.9375 1.92625C12.6692 1.92625 12.4584 2.13708 12.4584 2.40542V11.5H10.5417V4.59042C10.5417 4.32208 10.3309 4.11125 10.0625 4.11125C9.79419 4.11125 9.58335 4.33167 9.58335 4.59042V16.9242L4.45627 14.2121L3.96752 14.6433Z" fill="#285D9A"/></g><defs><clipPath id="clip0_750_12236"><rect width="23" height="23" fill="white"/></clipPath></defs></svg>');
                break;
            case 'Test_Quiz':
                svg = $('<svg class="assignment-lab" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_750_12240)"><path d="M18 2H2C0.9 2 0 2.9 0 4V18C0 19.1 0.9 20 2 20H18C19.1 20 20 19.1 20 18V4C20 2.9 19.1 2 18 2ZM18 18H2V4H18V18Z" fill="#285D9A"/><path d="M17.41 7.42L15.99 6L12.82 9.17L11.41 7.75L10 9.16L12.82 12L17.41 7.42Z" fill="#285D9A"/><path d="M8 8H3V10H8V8Z" fill="#285D9A"/><path d="M8 12H3V14H8V12Z" fill="#285D9A"/><path d="M8 16H3V18H8V16Z" fill="#285D9A"/></g><defs><clipPath id="clip0_750_12240"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>');
                break;
            case 'Exam':
                svg = $('<svg class="assignment-lab" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_750_12244)"><path d="M12.45 16H14.54L9.42996 3H7.56996L2.45996 16H4.54996L5.66996 13H11.31L12.45 16ZM6.42996 11L8.49996 5.48L10.57 11H6.42996ZM21.59 11.59L13.5 19.68L9.82996 16L8.41996 17.41L13.51 22.5L23 13L21.59 11.59Z" fill="#285D9A"/></g><defs><clipPath id="clip0_750_12244"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>');
                break;
            case 'Seminar_Workshop':
                svg = $('<svg class="assignment-lab" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_750_12248)"><path d="M12 5C8.13 5 5 8.13 5 12H7C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12H19C19 8.13 15.87 5 12 5ZM13 14.29C13.88 13.9 14.5 13.03 14.5 12C14.5 10.62 13.38 9.5 12 9.5C10.62 9.5 9.5 10.62 9.5 12C9.5 13.02 10.12 13.9 11 14.29V17.59L7.59 21L9 22.41L12 19.41L15 22.41L16.41 21L13 17.59V14.29ZM12 1C5.93 1 1 5.93 1 12H3C3 7.03 7.03 3 12 3C16.97 3 21 7.03 21 12H23C23 5.93 18.07 1 12 1Z" fill="#285D9A"/></g><defs><clipPath id="clip0_750_12248"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>');
                break;
        }
        return svg ;
    }
    function getDeliveryType(){
        var url = 'http://localhost:8080/api/v1/syllabus/OutlineScreen/showDeliverType';
        $.ajax({
            url: url,
            type: 'GET',
            success: function (data) {
                addTrainingContent(data);
            },
            error: function (error) {
                console.log('Error:', error);
            }
        });
    }
</script>
<script>
    // Hàm để lấy giá trị từ query parameter
    document.addEventListener('DOMContentLoaded', function() {
        function getQueryParam(parameter) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(parameter);

        }
        const param1Value = getQueryParam('param1');
        if (param1Value) {
            document.getElementById('syllabusNameInput').value = param1Value;
            console.log(param1Value);
        } else {
            console.log('Không có giá trị param1 được truyền.');
        }
    });

</script>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

</body>

</html>