<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="/css/Bootstrap%205/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <script src="/js/Bootstrap%205/bootstrap.bundle.min.js"></script>
  <script src="/js/JQuery/jquery-3.7.1.js"></script>
  <link href="/css/select2/select2.css" rel="stylesheet" />
  <script src="/js/select2/select2.min.js"></script>
  <link href="/css/DataTable/jquery.dataTables.css" rel="stylesheet">
  <script src="/js/DataTable/jquery.dataTables.js"></script>
  <link href="/css/syllabus/listSyllabus.css" rel="stylesheet" >
  <link rel="shortcut icon" type="image/png" href="img/FPT_logo.png"/>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <title>Syllabus</title>
  <link href='https://fonts.googleapis.com/css?family=Inter' rel='stylesheet'>
  <link href="/css/syllabus/importSyllabus.css" rel="stylesheet">

  <!-- Đảm bảo jQuery đã được bao gồm trước DataTable -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">

  <style>
    .search-item {
      border-radius: 8px;
      border: 1px solid #FFF;
      background: var(--Sub-info, #474747);
      color: white;
      height: 45px;
      padding: 7px;
    }
    .search-item {
      user-select: none;
    }
    .search-item>span {
      cursor: pointer;
    }
    #table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 10px 10px 0px 0px;
      box-shadow: -4px 5px 9px 1px gray;
    }

    #table td {
      padding: 5px 20px;
    }

    #table tr {
      border-bottom: 0.5px solid #2D3748;
    }

    #table>thead {
      background: #2D3748;
      color: white;
      height: 40px;
    }
  </style>


</head>
<body>
<div class="d-flex flex-column" style="height: 100vh;">
  <header class="bg-main text-white px-5 py-1" >
    <div th:replace="~{common :: header}"></div>
  </header>
  <div class="d-flex flex-grow-1 flex-row">

<!--    ERROR-->
    <div class="toast error" style="position: fixed; z-index:1001
        ;display: flex; align-items: center; gap: 15px;
        right: 0; margin: 10px 40px 0 0; opacity: 0">
      <div class="container-1">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="container-2">
        <div class="container-2Text">
          <p>Error</p>
          <p></p>
        </div>
        <div class="loading1"></div>
      </div>
    </div>
<!--    ERROR-->

<!--    SUCCESS-->
    <div class="toast success" style="position: fixed;z-index:1001
        ;display: flex; align-items: center; gap: 15px;
        right: 0; margin: 10px 40px 0 0; opacity: 0">
      <div class="container-1">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="container-2">
        <div class="container-2Text">
          <p>Success</p>
          <p>Import successfully.</p>
        </div>
        <div class="loadingSucces"></div>
      </div>
    </div>
    <!--    SUCCESS-->

<!--    WARNING-->
    <div class="toast warning" style="position: fixed;z-index:1001
        ;display: flex; align-items: center; gap: 15px;
        right: 0; margin: 10px 40px 0 0; opacity: 0">
      <div class="container-1">
        <i class="fas fa-exclamation-circle"></i>
      </div>
      <div class="container-2">
        <div class="container-2Text">
          <p>Warning</p>
          <p>Please fill all fields.</p>
        </div>
        <div class="loadingWarning"></div>
      </div>
    </div>
<!--WARNING-->
    <div th:replace="~{common :: menu}"></div>

    <div class="flex-grow-1">
      <div class="ListSyllabus">Syllabus</div>
      <div class="nav-syllabus">
        <div class="row w-100">
          <div class="d-inline-block position-relative" style="width: 49%; padding-left: 28px;">
            <!--          <i class="icon bi bi-search"></i>-->
            <div class="container-input" style="display: flex;">
              <div class="input-container">
                <ion-icon name="search-outline" class="search-icon"></ion-icon>
                <input id="search-input" type="text" class="form-control search d-inline-block ps-4" style="width: 300px; margin-right: 10px"
                       placeholder="  Search by ...">
              </div>
              <div class="input-container">
                <input id="search-input-calendar" type="date" class="form-control search d-inline-block ps-4" style="width: 300px"
                       placeholder="  Created date ...">
              </div>
            </div>
          </div>
          <th:block th:each="authority : ${#authentication.getAuthorities()}"
                    th:if="${authority.authority == 'CREATE_SYLLABUS'}">
            <div class="col text-end" style="padding-right: 28px">
              <button class="btn btn-dark" >
                <a th:href="@{/createSyllabusGeneral}" style="text-decoration: none; color: #eeeaea" id="createSyllabusBtn1">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_487_2486)">
                      <path
                              d="M13 7H11V11H7V13H11V17H13V13H17V11H13V7ZM12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z"
                              fill="#DFDEDE" />
                    </g>
                    <defs>
                      <clipPath id="clip0_487_2486">
                        <rect width="24" height="24" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                  Add Syllabus
                </a>
              </button>
            </div>
          </th:block>
        </div>
        <!--      button import-->
        <div class="button" id="open-import-syllabus-dialog-button">
          <svg
                  class="upload"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_2391_623)">
              <path
                      d="M9 16H15V10H19L12 3L5 10H9V16ZM12 5.83L14.17 8H13V14H11V8H9.83L12 5.83ZM5 18H19V20H5V18Z"
                      fill="#DFDEDE"
              />
            </g>
            <defs>
              <clipPath id="clip0_2391_623">
                <rect width="24" height="24" fill="white" />
              </clipPath>
            </defs>
          </svg>
          <div class="filter">Import</div>
        </div>
      </div>
      <!--// search key-->
      <div id="search-keyword" class="search-keyword d-flex p-2 flex-wrap">
        <div class="search-item p-2" style="display: none">
          foundation
          <span class="deleteButton">&#10005;</span>
        </div>
      </div>

      <div class="table-container">
        <table id="user-information-table" class="table table-responsive">
          <thead>
          <th style="border-top-left-radius: 10px; user-select: none; cursor:pointer;">Syllabus <svg
                  class="sortSyllabus"
                  width="18"
                  height="18"
                  viewBox="0 0 18 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_707_7387)">
              <path style="cursor:pointer;" class="sortSyllabus"
                      d="M5.70833 13.5H7.54167C7.79375 13.5 8 13.1625 8 12.75C8 12.3375 7.79375 12 7.54167 12H5.70833C5.45625 12 5.25 12.3375 5.25 12.75C5.25 13.1625 5.45625 13.5 5.70833 13.5ZM5.25 5.25C5.25 5.6625 5.45625 6 5.70833 6H13.0417C13.2937 6 13.5 5.6625 13.5 5.25C13.5 4.8375 13.2937 4.5 13.0417 4.5H5.70833C5.45625 4.5 5.25 4.8375 5.25 5.25ZM5.70833 9.75H10.2917C10.5438 9.75 10.75 9.4125 10.75 9C10.75 8.5875 10.5438 8.25 10.2917 8.25H5.70833C5.45625 8.25 5.25 8.5875 5.25 9C5.25 9.4125 5.45625 9.75 5.70833 9.75Z"
                      fill="#F1F1F1"
              />
            </g>
            <defs>
              <clipPath id="clip0_707_7387">
                <rect width="18" height="18" fill="white" />
              </clipPath>
            </defs>
          </svg>
          </th>
          <th>Code <svg
                  class="sortCode"
                  width="18"
                  height="18"
                  viewBox="0 0 18 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_707_7387)">
              <path
                      class="sortCode"
                      d="M5.70833 13.5H7.54167C7.79375 13.5 8 13.1625 8 12.75C8 12.3375 7.79375 12 7.54167 12H5.70833C5.45625 12 5.25 12.3375 5.25 12.75C5.25 13.1625 5.45625 13.5 5.70833 13.5ZM5.25 5.25C5.25 5.6625 5.45625 6 5.70833 6H13.0417C13.2937 6 13.5 5.6625 13.5 5.25C13.5 4.8375 13.2937 4.5 13.0417 4.5H5.70833C5.45625 4.5 5.25 4.8375 5.25 5.25ZM5.70833 9.75H10.2917C10.5438 9.75 10.75 9.4125 10.75 9C10.75 8.5875 10.5438 8.25 10.2917 8.25H5.70833C5.45625 8.25 5.25 8.5875 5.25 9C5.25 9.4125 5.45625 9.75 5.70833 9.75Z"
                      fill="#F1F1F1"
              />
            </g>
            <defs>
              <clipPath id="clip0_707_7387">
                <rect width="18" height="18" fill="white" />
              </clipPath>
            </defs>
          </svg>
          </th>
          <th>Created date <svg
                  class="sortCreatedDate"
                  width="18"
                  height="18"
                  viewBox="0 0 18 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_707_7387)">
              <path
                      class="sortCreatedDate"
                      d="M5.70833 13.5H7.54167C7.79375 13.5 8 13.1625 8 12.75C8 12.3375 7.79375 12 7.54167 12H5.70833C5.45625 12 5.25 12.3375 5.25 12.75C5.25 13.1625 5.45625 13.5 5.70833 13.5ZM5.25 5.25C5.25 5.6625 5.45625 6 5.70833 6H13.0417C13.2937 6 13.5 5.6625 13.5 5.25C13.5 4.8375 13.2937 4.5 13.0417 4.5H5.70833C5.45625 4.5 5.25 4.8375 5.25 5.25ZM5.70833 9.75H10.2917C10.5438 9.75 10.75 9.4125 10.75 9C10.75 8.5875 10.5438 8.25 10.2917 8.25H5.70833C5.45625 8.25 5.25 8.5875 5.25 9C5.25 9.4125 5.45625 9.75 5.70833 9.75Z"
                      fill="#F1F1F1"
              />
            </g>
            <defs>
              <clipPath id="clip0_707_7387">
                <rect width="18" height="18" fill="white" />
              </clipPath>
            </defs>
          </svg>
          </th>
          <th>Created by <svg
                  class="sortCreatedBy"
                  width="18"
                  height="18"
                  viewBox="0 0 18 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_707_7387)">
              <path
                      class="sortCreatedBy"
                      d="M5.70833 13.5H7.54167C7.79375 13.5 8 13.1625 8 12.75C8 12.3375 7.79375 12 7.54167 12H5.70833C5.45625 12 5.25 12.3375 5.25 12.75C5.25 13.1625 5.45625 13.5 5.70833 13.5ZM5.25 5.25C5.25 5.6625 5.45625 6 5.70833 6H13.0417C13.2937 6 13.5 5.6625 13.5 5.25C13.5 4.8375 13.2937 4.5 13.0417 4.5H5.70833C5.45625 4.5 5.25 4.8375 5.25 5.25ZM5.70833 9.75H10.2917C10.5438 9.75 10.75 9.4125 10.75 9C10.75 8.5875 10.5438 8.25 10.2917 8.25H5.70833C5.45625 8.25 5.25 8.5875 5.25 9C5.25 9.4125 5.45625 9.75 5.70833 9.75Z"
                      fill="#F1F1F1"
              />
            </g>
            <defs>
              <clipPath id="clip0_707_7387">
                <rect width="18" height="18" fill="white" />
              </clipPath>
            </defs>
          </svg>
          </th>
          <th>Duration <svg
                  class="sortDuration"
                  width="18"
                  height="18"
                  viewBox="0 0 18 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_707_7387)">
              <path class="sortDuration"
                      d="M5.70833 13.5H7.54167C7.79375 13.5 8 13.1625 8 12.75C8 12.3375 7.79375 12 7.54167 12H5.70833C5.45625 12 5.25 12.3375 5.25 12.75C5.25 13.1625 5.45625 13.5 5.70833 13.5ZM5.25 5.25C5.25 5.6625 5.45625 6 5.70833 6H13.0417C13.2937 6 13.5 5.6625 13.5 5.25C13.5 4.8375 13.2937 4.5 13.0417 4.5H5.70833C5.45625 4.5 5.25 4.8375 5.25 5.25ZM5.70833 9.75H10.2917C10.5438 9.75 10.75 9.4125 10.75 9C10.75 8.5875 10.5438 8.25 10.2917 8.25H5.70833C5.45625 8.25 5.25 8.5875 5.25 9C5.25 9.4125 5.45625 9.75 5.70833 9.75Z"
                      fill="#F1F1F1"
              />
            </g>
            <defs>
              <clipPath id="clip0_707_7387">
                <rect width="18" height="18" fill="white" />
              </clipPath>
            </defs>
          </svg>
          </th>
          <th style="width: 12%;">Output Standard</th>
          <th>Status</th>
          <th style=" border-top-right-radius: 10px;">Export Action</th>
          </thead>
          <tbody id="data-table">
          </tbody>
        </table>
      </div>

      <!--      === PAGING BAR ===-->
      <div class="navigation-dot">
        <div class="navi-dot" id="navi-dot">
<!--          <svg-->
<!--                  class="arrow-back-ios"-->
<!--                  width="24"-->
<!--                  height="24"-->
<!--                  viewBox="0 0 24 24"-->
<!--                  fill="none"-->
<!--                  xmlns="http://www.w3.org/2000/svg"-->
<!--          >-->
<!--            <g clip-path="url(#clip0_2189_1594)">-->
<!--              <path-->
<!--                      d="M16 7.16212L14.9323 6L9 12.5L14.9383 19L16 17.8379L11.1234 12.5L16 7.16212Z"-->
<!--                      fill="#2D3748"-->
<!--              />-->
<!--            </g>-->
<!--            <defs>-->
<!--              <clipPath id="clip0_2189_1594">-->
<!--                <rect width="24" height="24" fill="white" />-->
<!--              </clipPath>-->
<!--            </defs>-->
<!--          </svg>-->
      <!--    <div class="group-6" id="group-6">
            <div class="ellipse-2-1"></div>
            <div class="_1">1</div>

          </div>
          <div class="group-5" id="group-5">
            <div class="ellipse-2"></div>
            <div class="_2">2</div>
          </div>
          <div class="group-7" id="group-7">
            <div class="ellipse-2-2"></div>
            <div class="_3">3</div>
          </div>


         <div style="position: absolute; top: 0px">-->
<!--            <div style="border-radius: 50px; width: 3px; height: 3px; left: 11px; top: 11px; position: absolute; background: #2D3748"></div>-->
<!--            <div style="border-radius: 50px; width: 3px; height: 3px; left: 18px; top: 11px; position: absolute; background: #2D3748"></div>-->
<!--            <div style="border-radius: 50px; width: 3px; height: 3px; left: 4px; top: 11px; position: absolute; background: #2D3748"></div>-->
<!--          </div>-->

<!--          <div class="group-8" id="group-8">-->
<!--            <div class="ellipse-2-22"></div>-->
<!--            <div class="_10">10</div>-->
<!--          </div>-->

<!--          <svg-->
<!--                  class="arrow-forward-ios"-->
<!--                  width="24"-->
<!--                  height="24"-->
<!--                  viewBox="0 0 24 24"-->
<!--                  fill="none"-->
<!--                  xmlns="http://www.w3.org/2000/svg"-->
<!--          >-->
<!--            <g clip-path="url(#clip0_2189_1613)">-->
<!--              <path-->
<!--                      d="M9 16.8149L10.0617 17.8766L16 11.9383L10.0617 6L9 7.0617L13.8766 11.9383L9 16.8149Z"-->
<!--                      fill="#2D3748"-->
<!--              />-->
<!--            </g>-->
<!--            <defs>-->
<!--              <clipPath id="clip0_2189_1613">-->
<!--                <rect width="24" height="24" fill="white" />-->
<!--              </clipPath>-->
<!--            </defs>-->
<!--          </svg>-->

<!--          <svg-->
<!--                  class="last-page"-->
<!--                  width="24"-->
<!--                  height="24"-->
<!--                  viewBox="0 0 24 24"-->
<!--                  fill="none"-->
<!--                  xmlns="http://www.w3.org/2000/svg"-->
<!--          >-->
<!--            <g clip-path="url(#clip0_2189_1616)">-->
<!--              <path-->
<!--                      d="M5.59 7.41L10.18 12L5.59 16.59L7 18L13 12L7 6L5.59 7.41ZM16 6H18V18H16V6Z"-->
<!--                      fill="#2D3748"-->
<!--              />-->
<!--            </g>-->
<!--            <defs>-->
<!--              <clipPath id="clip0_2189_1616">-->
<!--                <rect width="24" height="24" fill="white" />-->
<!--              </clipPath>-->
<!--            </defs>-->
<!--          </svg>-->

          </div>
         <!-- <div style="position: absolute; top: 0px">
            <div style="border-radius: 50px; width: 3px; height: 3px; left: 11px; top: 11px; position: absolute; background: #2D3748"></div>
            <div style="border-radius: 50px; width: 3px; height: 3px; left: 18px; top: 11px; position: absolute; background: #2D3748"></div>
            <div style="border-radius: 50px; width: 3px; height: 3px; left: 4px; top: 11px; position: absolute; background: #2D3748"></div>
          </div>-->
<!--          <svg-->
<!--                  class="arrow-forward-ios"-->
<!--                  width="24"-->
<!--                  height="24"-->
<!--                  viewBox="0 0 24 24"-->
<!--                  fill="none"-->
<!--                  xmlns="http://www.w3.org/2000/svg"-->
<!--          >-->
<!--            <g clip-path="url(#clip0_2189_1613)">-->
<!--              <path-->
<!--                      d="M9 16.8149L10.0617 17.8766L16 11.9383L10.0617 6L9 7.0617L13.8766 11.9383L9 16.8149Z"-->
<!--                      fill="#2D3748"-->
<!--              />-->
<!--            </g>-->
<!--            <defs>-->
<!--              <clipPath id="clip0_2189_1613">-->
<!--                <rect width="24" height="24" fill="white" />-->
<!--              </clipPath>-->
<!--            </defs>-->
<!--          </svg>-->

         <!-- <svg
                  class="last-page"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_2189_1616)">
              <path
                      d="M5.59 7.41L10.18 12L5.59 16.59L7 18L13 12L7 6L5.59 7.41ZM16 6H18V18H16V6Z"
                      fill="#2D3748"
              />
            </g>
            <defs>
              <clipPath id="clip0_2189_1616">
                <rect width="24" height="24" fill="white" />
              </clipPath>
            </defs>
          </svg>-->
        <div class="rowPerPage" style="display: flex; justify-content: center; position: absolute; right: 0; align-items: center">
          <label style="margin-right: 50px">Rows per page</label>
          <select id="rowPerPage" name="colors" class="combo-box2" style="border: none; outline: none">
            <option value="5" style="font-size: .8em">5</option>
            <option value="10" style="font-size: .8em">10</option>
            <option value="15" style="font-size: .8em">15</option>
            <option value="20" style="font-size: .8em">20</option>
          </select>
        </div>
        </div>
      <dialog id="import-syllabus-dialog" class="p-0" style="border-radius: 20px; border: none;">
        <div class="popup-container">
          <div class="popup-header">
            <div class="pop-up-header-text">Import Syllabus</div>
            <button style="position: absolute; right: 0;" class="btn close-import-syllabus-dialog-button">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_46_6114)">
                  <path
                          d="M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM15.59 7L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41L15.59 7Z"
                          fill="white" />
                </g>
                <defs>
                  <clipPath id="clip0_46_6114">
                    <rect width="24" height="24" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </button>
          </div>
          <form id="import-syllabus-form">
            <div class="form-container">
              <div class="form-header">Import setting</div>
              <div style="width: 333px; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 15px; display: inline-flex">
                <div class="form-item">
                  <div style="height: 17px; padding-left: 10px; padding-right: 10px; justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
                    <div><span style="color: #1E1F20; font-size: 14px; font-family: Inter; font-weight: 400; word-wrap: break-word">File (xlsx)</span><span style="color: #FD5656; font-size: 14px; font-family: Inter; font-weight: 400; word-wrap: break-word">*</span></div>
                  </div>

                  <div style="width: 20%; height: 100%; padding-left: 20px; padding-right: 20px; padding-top: 5px; padding-bottom: 5px; background: #2D3748; border-radius: 5px; justify-content: flex-start; align-items: center; gap: 10px; display: inline-flex">
                    <label for="fileInput" class="custom-file-upload">
                      Select
                    </label>
                    <input type="file" id="fileInput" value="" style="display: none">
                  </div>
                  <div id="selectedFileName" style="margin-top:8px; color: black; font-size: 10px;"></div>
                </div>

                <div class="form-item">
                  <div style="height: 17px; padding-left: 10px; padding-right: 10px; justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
                    <div style="color: #1E1F20; font-size: 14px; font-family: Inter; font-weight: 400; word-wrap: break-word">Encoding type</div>
                  </div>
                  <div class="dropdown-box">
                    <select id="level" name="colors" class="combo-box" style="border: none; outline: none; transition: .5s ease;">
                      <option value="Auto-detect" style="font-size: .8em">Auto-detect</option>
                      <option value="Multi-part" style="font-size: .8em">Multi-part</option>
                    </select>
                  </div>
                </div>
                <div class="form-item">
                  <div style="height: 22px; padding-left: 10px; padding-right: 10px; justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
                    <div style="color: #1E1F20; font-size: 14px; font-family: Inter; font-weight: 400; line-height: 22px; word-wrap: break-word">Column seperator</div>
                  </div>
                  <div style="width: 140px; height: 24px; padding-left: 10px; padding-right: 10px; background: white; border-radius: 5px; border: 1px #ACACAC solid; justify-content: space-between; align-items: center; display: flex">
                    <div style="color: black; font-size: 14px; font-family: Inter; font-weight: 400; line-height: 22px; word-wrap: break-word">Comma</div>
                    <div style="width: 10px; height: 9px; padding-top: 2.03px; padding-bottom: 2.14px; padding-left: 1.17px; padding-right: 1.17px; justify-content: center; align-items: center; display: flex">
                      <img style="width: 7.66px; height: 4.83px" src="https://via.placeholder.com/8x5" />
                    </div>
                  </div>
                </div>
                <div class="form-item">
                  <div style="height: 22px; padding-left: 10px; padding-right: 10px; justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
                    <div style="color: #1E1F20; font-size: 14px; font-family: Inter; font-weight: 400; line-height: 22px; word-wrap: break-word">Import template</div>
                  </div>
                  <div style="justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
                    <div style="color: #285D9A; font-size: 14px; font-family: Inter; font-weight: 400; text-decoration: underline; line-height: 22px; word-wrap: break-word">Download</div>
                  </div>
                </div>
              </div>
            </div>
            <div style="width: 460px; height: 0px; border: 1px #ACACAC solid"></div>
            <div style="width: 500px; padding-left: 20px; padding-right: 20px; justify-content: space-between; align-items: flex-start; display: inline-flex">
              <div style="color: black; font-size: 14px; font-family: Inter; font-weight: 700; line-height: 22px; word-wrap: break-word">Duplicate control</div>
              <div style="width: 333px; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 15px; display: inline-flex">
                <div style="align-self: stretch; height: 49px; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 5px; display: flex">
                  <div style="width: 165px; padding-left: 10px; padding-right: 10px; justify-content: flex-start; align-items: flex-start; gap: 10px; display: inline-flex">
                    <div style="color: #1E1F20; font-size: 14px; font-family: Inter; font-weight: 400; line-height: 22px; word-wrap: break-word">Scanning</div>
                  </div>
                  <div style="padding-left: 10px; justify-content: flex-start; align-items: center; gap: 16px; display: inline-flex">
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                      <div style="background: white; border-radius: 2px; justify-content: center; align-items: center; gap: 10px; display: flex">
                        <div style="width: 24px; height: 24px; border-radius: 2px; border: 1px rgba(24, 144, 255, 0) solid"></div>
                        <div style="width: 16px; height: 16px; background: #2D3748; border-radius: 2px"></div>
                        <div style="width: 10.62px; height: 7.62px; background: white"></div>
                      </div>
                      <div style="color: rgba(0, 0, 0, 0.85); font-size: 14px; font-family: Roboto; font-weight: 400; line-height: 22px; word-wrap: break-word">Syllabus code</div>
                    </div>
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                      <div style="background: white; border-radius: 2px; flex-direction: column; justify-content: center; align-items: center; display: inline-flex">
                        <div style="width: 16px; height: 16px; background: white; border-radius: 2px; border: 1px #D9D9D9 solid"></div>
                      </div>
                      <div style="color: rgba(0, 0, 0, 0.85); font-size: 14px; font-family: Roboto; font-weight: 400; line-height: 22px; word-wrap: break-word">Syllabus name</div>
                    </div>
                  </div>
                </div>
                <div style="align-self: stretch; height: 59px; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 5px; display: flex">
                  <div style="width: 165px; padding-left: 10px; padding-right: 10px; justify-content: flex-start; align-items: flex-start; gap: 10px; display: inline-flex">
                    <div style="color: #1E1F20; font-size: 14px; font-family: Inter; font-weight: 400; line-height: 22px; word-wrap: break-word">Duplicate handle</div>
                  </div>
                  <div style="align-self: stretch; padding-top: 5px; padding-bottom: 5px; padding-left: 10px; justify-content: flex-start; align-items: center; gap: 16px; display: inline-flex">
                    <div style="background: rgba(255, 255, 255, 0); justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                      <div style="width: 16px; height: 16px; position: relative">
                        <div style="width: 16px; height: 16px; left: 0px; top: 0px; position: absolute; background: #E6F7FF; border-radius: 9999px"></div>
                        <div style="width: 16px; height: 16px; left: 0px; top: 0px; position: absolute; background: white; border-radius: 100px; border: 1px #2D3748 solid"></div>
                        <div style="width: 8px; height: 8px; left: 4px; top: 4px; position: absolute; background: #2D3748; border-radius: 20px"></div>
                      </div>
                      <div style="color: rgba(0, 0, 0, 0.85); font-size: 14px; font-family: Roboto; font-weight: 400; line-height: 22px; word-wrap: break-word">Allow</div>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0); justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                      <div style="width: 16px; height: 16px; background: white; border-radius: 100px; border: 1px #D9D9D9 solid"></div>
                      <div style="color: rgba(0, 0, 0, 0.85); font-size: 14px; font-family: Roboto; font-weight: 400; line-height: 22px; word-wrap: break-word">Replace</div>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0); justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                      <div style="width: 16px; height: 16px; background: white; border-radius: 100px; border: 1px #D9D9D9 solid"></div>
                      <div style="color: rgba(0, 0, 0, 0.85); font-size: 14px; font-family: Roboto; font-weight: 400; line-height: 22px; word-wrap: break-word">Skip</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div style="width: 460px; height: 0px; border: 1px #ACACAC solid"></div>
            <div style="width:100%; right: 0; align-self: stretch; padding-left: 20px; padding-right: 20px; justify-content: flex-end; align-items: flex-start; gap: 10px; display: inline-flex">
              <div style="padding-left: 10px; padding-right: 10px; padding-top: 7px; padding-bottom: 7px; border-radius: 10px; justify-content: center; align-items: center; gap: 5px; display: flex">
                <div id="cancel-import-syllabus-btn" style="cursor:pointer; user-select: none ;margin-top: 10px; color: #E74A3B; font-size: 14px; font-family: Inter; font-weight: 700; text-decoration: underline; word-wrap: break-word">Cancel</div>
              </div>
              <div style="margin-top: 10px;padding: 5px 15px; background: #2D3748; border-radius: 10px; justify-content: center; align-items: center; gap: 10px; display: flex">
                <div id="import-syllabus-btn" style="cursor:pointer; user-select: none ; color: white; font-size: 14px; font-family: Inter; font-weight: 700; word-wrap: break-word">Import</div>
              </div>
            </div>
          </form>
        </div>
      </dialog>

<!--      POPUP FUNCTION SYLLABUS-->
      <dialog id="menu-syllabus-function-dialog" class="p-0" style="border-radius: 20px; border: none; width: 200px">
        <div class="popup-container">
          <div class="popup-header">
            <div class="pop-up-header-text1">Tool bar</div>
            <button style="position: absolute; right: 0;" class="btn close-menu-syllabus-dialog-button">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_46_6114)">
                  <path
                          d="M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM15.59 7L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41L15.59 7Z"
                          fill="white" />
                </g>
                <defs>
                  <clipPath id="clip0_46_6114">
                    <rect width="24" height="24" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </button>
          </div>
          <div class="syllabus-popup-menu">
            <div class="frame-86">
              <div class="frame-87">
                <svg
                        class="add"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_45_1808)">
                    <path
                            d="M13 7H11V11H7V13H11V17H13V13H17V11H13V7ZM12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z"
                            fill="#285D9A"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_45_1808">
                      <rect width="24" height="24" fill="white" />
                    </clipPath>
                  </defs>
                </svg>

                <div class="add-training-program">Add training program</div>
              </div>
              <a style="text-decoration: none; color: #0B2136" th:href="@{/createSyllabusGeneral}" class="frame-88">
                <svg
                        class="create"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_45_1811)">
                    <path
                            d="M3 17.25V21H6.75L17.81 9.94L14.06 6.19L3 17.25ZM5.92 19H5V18.08L14.06 9.02L14.98 9.94L5.92 19ZM20.71 5.63L18.37 3.29C18.17 3.09 17.92 3 17.66 3C17.4 3 17.15 3.1 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63Z"
                            fill="#285D9A"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_45_1811">
                      <rect width="24" height="24" fill="white" />
                    </clipPath>
                  </defs>
                </svg>

                <div class="edit-syllabus">Edit syllabus</div>
              </a>
              <div class="frame-85">
                <svg
                        class="copy"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_45_1814)">
                    <path
                            d="M15.7895 3H5.68421C4.75789 3 4 3.77727 4 4.72727V16.8182H5.68421V4.72727H15.7895V3ZM18.3158 6.45455H9.05263C8.12632 6.45455 7.36842 7.23182 7.36842 8.18182V20.2727C7.36842 21.2227 8.12632 22 9.05263 22H18.3158C19.2421 22 20 21.2227 20 20.2727V8.18182C20 7.23182 19.2421 6.45455 18.3158 6.45455ZM18.3158 20.2727H9.05263V8.18182H18.3158V20.2727Z"
                            fill="#285D9A"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_45_1814">
                      <rect width="24" height="24" fill="white" />
                    </clipPath>
                  </defs>
                </svg>

                <div class="duplicate-syllabus">Duplicate syllabus</div>
              </div>
              <div class="frame-84">
                <svg
                        class="delete-forever"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_45_1817)">
                    <path
                            d="M14.12 10.47L12 12.59L9.87 10.47L8.46 11.88L10.59 14L8.47 16.12L9.88 17.53L12 15.41L14.12 17.53L15.53 16.12L13.41 14L15.53 11.88L14.12 10.47ZM15.5 4L14.5 3H9.5L8.5 4H5V6H19V4H15.5ZM6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19ZM8 9H16V19H8V9Z"
                            fill="#2C5282"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_45_1817">
                      <rect width="24" height="24" fill="white" />
                    </clipPath>
                  </defs>
                </svg>

                <div class="delete-syllabus">Delete syllabus</div>
              </div>
            </div>
          </div>
        </div>
      </dialog>
    </div>
  </div>
  <div th:replace="~{common :: footer}"></div>
  <!--// js search-->
  <div class="dialog-backdrop" id="dialog-backdrop"></div>

  <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>

  <!-- DatePicker and dependencies-->
  <script src="https://cdn.jsdelivr.net/npm/date-object@latest/dist/umd/date-object.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-element-popper@latest/build/browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-multi-date-picker@latest/build/browser.min.js"></script>

  <!-- Optional Plugin -->
  <script src="https://cdn.jsdelivr.net/npm/react-multi-date-picker@latest/build/date_picker_header.browser.js"></script>

  <!--  LISTING SYLLABUS-->
  <script>
    var numberOfPage;
    var mode = 1;
    var myVar = 1;
    var selectedValue = 5;
    var searchKeywords = [];
    var tagNum = 0;
    // Tạo dấu 3 chấm
    var divContainer = document.createElement("div");
    divContainer.classList.add('threeDot');
    divContainer.id = "threeDot";
    var div1 = createChildDiv(11);
    var div2 = createChildDiv(18);
    var div3 = createChildDiv(4);
    div1.style.borderRadius = "10px";
    div2.style.borderRadius = "10px";
    div3.style.borderRadius = "10px";
    divContainer.appendChild(div1);
    divContainer.appendChild(div2);
    divContainer.appendChild(div3);
    function createChildDiv(leftValue) {
      var childDiv = document.createElement("div");
      childDiv.style.width = "4px";
      childDiv.style.height = "4px";
      childDiv.style.left = leftValue + "px";
      childDiv.style.top = "11px";
      childDiv.style.position = "absolute";
      childDiv.style.background = "#2D3748";
      return childDiv;
    }
    function deleteCookie(name) {
      document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
    }
    function getCookie(name) {
      var cookieArray = document.cookie.split("; ");
      for (var i = 0; i < cookieArray.length; i++) {
        var cookie = cookieArray[i].split("=");
        if (cookie[0] === name) {
          return cookie[1];
        }
      }
      return null;
    }
    function setCookie(name, value, hours) {
      var date = new Date();
      date.setTime(date.getTime() + (hours * 60 * 60 * 1000)); // Thời gian sống tính bằng mili giây

      var expires = "expires=" + date.toUTCString();
      document.cookie = name + "=" + value + ";" + expires + ";path=/";
    }

    $(document).ready(function () {
      var topicCode;
      //get dữ liệu
      // Assuming you have a table with the class "data-table"
      $('.excel-button').on('click', function () {
        console.log("click succ");
        // Find the closest row to the clicked button
        var row = $(this).closest('tr');
        // Access data in each column of the row
        topicCode = row.find('td:eq(1)').text();
        console.log('Topic Code: ' + topicCode);

        exportExcel(topicCode);
        // Perform your CSV export or Excel export here.
      });

      // MODE 1
      if(mode === 1) {
        var combo = document.getElementById("rowPerPage");
        combo.addEventListener("change", function () {
          selectedValue = combo.value; // Lấy giá trị đã chọn
          if (selectedValue !== "" && !combo.disabled) {
            console.log("Giá trị đã chọn mode 1: " + selectedValue);
            if (mode === 1) {
              performAjaxRequest();
            }
          } else {
            console.log("Chưa chọn tùy chọn");
          }
        });

        performAjaxRequest();
        var navidot = $('#navi-dot');
        //Lấy đúng phần tử được click vào
        navidot.on("click", ".common-container", function (event) {
          var clickedValue = $(event.currentTarget).find('.common-ellipse').next().text();
          var commonContainer = $(event.currentTarget).find('.common-ellipse');
          commonContainer.css('background-color', '#c4ccd7');
          commonContainer.css('color', '#475670');
          myVar = clickedValue;
          if (mode == 1) {
            performAjaxRequest();
          }
        });
        function performAjaxRequest() {
          var accessToken = getCookie("accessToken");
          $.ajax({
            url: 'http://localhost:8080/api/v1/syllabus/list-syllabus/' + selectedValue + '?page=' + myVar,
            type: 'GET',
            headers: {
              "Authorization": "Bearer " + accessToken // Sử dụng Bearer token nếu cần
            },
            xhrFields: {
              withCredentials: true
            },
            success: function (data) {
              console.log("DATA 1: " + data);
              // Xử lý dữ liệu và cập nhật bảng
              var dataTable = $('#data-table');
              dataTable.empty(); // Xóa nội dung hiện có trong bảng
              // Lặp qua dữ liệu và thêm từng dòng vào bảng
              $.each(data, function (index, item) {
                numberOfPage = item.count;
                var durationText = item.duration + " days";

                var row = '<tr>' +
                    '<td><a class="linkDetails" style="text-decoration: none;" data-topic-code="'+ item.topicCode + '">' + item.topicName + '</a></td>' +
                        '<td>' + item.topicCode + '</td>' +
                        '<td>' + item.createdDate + '</td>' +
                        '<td>' + item.createdBy + '</td>' +
                        '<td>' + durationText + '</td>' +
                        '<td>' + item.outputStandardArr + '</td>' +
                        '<td id="' + item.syllabusStatus + '">' + item.syllabusStatus + '</td>' +
                        '<td>' +
                        '<div style="display: flex; justify-content: center">' +
                        '<button class="button-action">' +
                        '<a style="text-decoration: none; color: white" class="csv-button" href="http://localhost:8080/api/v1/syllabus/exportCSV/' + item.topicCode + '">Export CSV</a>' +
                        '</button>' +
                        '<button class="button-action">' +
                        '<a style="text-decoration: none; color: white" class="excel-button" href="http://localhost:8080/api/v1/syllabus/exportExcel/' + item.topicCode + '">Export Excel</a>' +
                        '</button>' +
                        '<div data-topic-code="' + item.topicCode + '">' +
                        divContainer.outerHTML +
                        '<input type="hidden" id="topicName3dot" name="topicName" value="' + item.topicName + '">' +
                        '</div>' +
                        '</div>' +
                        '</td>' +
                        // Add other columns here
                        '</tr>';
                dataTable.append(row);

                $(document).on('click', '.linkDetails', function () {
                  var topicCode = $(this).data('topic-code');
                  localStorage.clear();
                  localStorage.setItem("topicCode", topicCode);
                  // Construct the URL with the input value
                  var url = '/general';

                  // Navigate to the destination page
                  window.location.href = url;
                });

              });

              // Click 3dot
              $(".threeDot").click(function () {
                // Retrieve topicCode from the closest ancestor with data-topic-code
                var topicCode = $(this).closest('[data-topic-code]').data('topic-code');
                // Show modal dialog
                $("#dialog-backdrop").css("display", "block");
                $("#menu-syllabus-function-dialog")[0].showModal();
                $("#menu-syllabus-function-dialog").attr("topicCode", topicCode);

                var topicCode1 = $("#menu-syllabus-function-dialog").attr("topicCode");
                console.log("TopicCode:", topicCode1);

                var toolBar = document.querySelector(".pop-up-header-text1");
                toolBar.innerText = "Tool Bar";
                toolBar.style.color = "white";
                toolBar.style.weight = "bold";
                toolBar.style.font = "Inter";
                toolBar.style.margin = "0 40px 0 40px";
                toolBar.style.whiteSpace = "nowrap";
              });
              //Click close
              $(".close-menu-syllabus-dialog-button").click(function (event) {
                event.preventDefault();
                $("#menu-syllabus-function-dialog")[0].close();
                hideBackdrop();
              });
              // Click edit in syllabus menu dialog
              $(".frame-88").click(function (event) {
                var topicCode1 = $("#menu-syllabus-function-dialog").attr("topicCode");
                localStorage.clear();
                localStorage.setItem("topicCode1", topicCode1);
              });

              function hideBackdrop() {
                $("#dialog-backdrop").css("display", "none");
              }

              // Hiển thị nút paging theo số trang
              var navidot = $('#navi-dot');
              navidot.empty();
              var newDiv;
              for (var i = 1; i <= numberOfPage; i++) {
                newDiv = $('<div>', {
                  'class': 'common-group',
                  'html': '<div class="common-container">' +
                          '<div class="common-ellipse"></div>' +
                          '<div class="_' + i + '" ' +
                          'style="font: 700 12px Inter, sans-serif;' +
                          'position: absolute; top: 4px; left: 8px">' + i + '</div>' +
                          '</div>'
                });
                navidot.append(newDiv);
              }
            },
            error: function (error) {
              // alert(error);
              // Xử lý lỗi khi gửi yêu cầu
              if (error.status === 401) {
                // Trường hợp lỗi 401: Unauthorized
                // Gửi yêu cầu refreshToken để lấy accessToken mới
                var refreshToken = getCookie("refreshToken");
                $.ajax({
                  url: "http://localhost:8080/api/v1/auth/refreshToken",
                  method: "POST",
                  data: JSON.stringify({ refreshToken: refreshToken }), // Đặt refreshToken vào phần thân của yêu cầu
                  contentType: "application/json", // Xác định kiểu dữ liệu của yêu cầu
                  xhrFields: {
                    withCredentials: true
                  },
                  success: function (response) {
                    //Xóa cookie cũ (accessToken)
                    deleteCookie("accessToken");
                    // Lưu accessToken mới vào cookie
                    var accessTokenV2 = response.payload.accessToken;

                    setCookie("accessToken",accessTokenV2 , 1); // Ví dụ: thời gian sống 1 giờ

                    // // Xóa cookie cũ (refreshToken)
                    // deleteCookie("refreshToken");

                    // Gửi lại yêu cầu gốc với accessToken mới
                    performAjaxRequest();
                  },
                  error: function (refreshError) {
                    if (refreshError.status === 403) {
                      // Trường hợp lỗi 403: Forbidden
                      // Chuyển hướng trình duyệt đến trang khác (ví dụ: http://localhost:8081/logout
                      // )
                      window.location.href = "http://localhost:8081/logout" +
                              "";
                    } else {
                      alert("Refresh token failed: " + refreshError);
                      // Xử lý lỗi khác khi refreshToken không thành công
                      window.location.href = "http://localhost:8081/logout" +
                              "";

                    }
                  }
                });
              } else {
                alert("Error: " + error.status);
                // Xử lý lỗi khác (không phải lỗi 401)
                // window.location.href = "http://localhost:8081/logout
                // ";
              }

              //
            }
          });
        };
        }


      // MODE 2
      // Lắng nghe sự kiện khi người dùng nhấn Enter trong ô tìm kiếm
      var input = document.getElementById("search-input");
      var inputCalendar = document.getElementById("search-input-calendar");
      input.addEventListener("keypress", function (event) {
        var date = inputCalendar.value;
        var selectedDate = new Date(inputCalendar.value);
        var year = selectedDate.getFullYear();
        var month = (selectedDate.getMonth() + 1).toString().padStart(2, '0');
        var day = selectedDate.getDate().toString().padStart(2, '0');
        // Định dạng lại thành "yyyy/mm/dd"
        var formattedDate = year + '/' + month + '/' + day;
          if (tagNum <= 3) {
            if (event.key === "Enter" && input.value.trim() !== "") {
              if(isNaN(Date.parse(formattedDate))){
                tagNum++;
                mode = 2;
                console.log(formattedDate + " là date hiện tại");
                if (mode === 2) {
                  let search = document.getElementById("search-keyword");
                  let item = document.createElement("div");
                  item.className = "search-item";
                  const keyword = input.value.trim();
                  item.innerHTML += `
                ${keyword}
                <span>&#10005;</span>
            `
                  search.appendChild(item);
                  searchKeywords.push(keyword);
                  // Gọi hàm sendSearchRequest để gửi yêu cầu AJAX
                  var combo1 = document.getElementById("rowPerPage");
                  combo1.addEventListener("change", function () {
                    selectedValue = combo1.value; // Lấy giá trị đã chọn
                    if (selectedValue !== "" && !combo1.disabled) {
                      console.log("Giá trị đã chọn mode 2: " + selectedValue);
                      console.log("Giá trị searchKey mode 2: " + searchKeywords);
                      sendSearchRequest(searchKeywords);
                    } else {
                      console.log("Chưa chọn tùy chọn");
                    }
                  });
                  sendSearchRequest(searchKeywords);
                  console.log("Array: " + searchKeywords);

                  var navidot = $('#navi-dot');
                  //Lấy đúng phần tử được click vào
                  navidot.on("click", ".common-container", function (event) {
                    var clickedValue = $(event.currentTarget).find('.common-ellipse').next().text();
                    console.log("Clicked Value: " + clickedValue);
                    myVar = clickedValue;
                    if (mode == 2) {
                      sendSearchRequest(searchKeywords);
                    }
                  });

                  // XÓA TỪ KHÓA
                  let deleteButton = item.getElementsByTagName("span")[0];
                  deleteButton.addEventListener("click", () => {
                    tagNum--;
                    // Xóa từ khóa khỏi mảng searchedKeywords
                    const index = searchKeywords.indexOf(keyword);
                    if (index !== -1) {
                      searchKeywords.splice(index, 1);
                        if (searchKeywords.length == 0) {
                          inputCalendar.value = "";
                          input.value = "";
                          performAjaxRequest();
                      } else
                        sendSearchRequest(searchKeywords);
                    }
                    item.remove();
                  });
                }

                sendSearchRequest(searchKeywords);
                console.log("mode " + mode);
                // Hàm gửi yêu cầu AJAX với từ khóa tìm kiếm
                function sendSearchRequest(searchKeywords) {
                  var url = "";
                  myVar = 1;
                  var encodedKeywords = encodeURIComponent(searchKeywords);
                  if (searchKeywords.length > 0) {
                    url = `http://localhost:8080/api/v1/syllabus/search-syllabus/` + selectedValue + `?key=` + encodedKeywords + '&page=' + myVar;
                  }
                  var accessToken = getCookie("accessToken");
                  $.ajax({
                    url: url,
                    method: "GET",
                    headers: {
                      "Authorization": "Bearer " + accessToken // Sử dụng Bearer token nếu cần
                    },
                    xhrFields: {
                      withCredentials: true
                    },
                    success: function (data) {
                      console.log("DATA 2: " + data);
                      // Xử lý dữ liệu và cập nhật bảng
                      var dataTable = $('#data-table');
                      dataTable.empty();
                      // Lặp qua dữ liệu và thêm từng dòng vào bảng
                      $.each(data, function (index, item) {
                        numberOfPage = item.count;
                        console.log("Searched page number: " + item.count);
                        var durationText = item.duration + " days";

                        var row = '<tr>' +
                                '<td><a class="linkDetails" style="text-decoration: none;" data-topic-code="'+ item.topicCode + '">' + item.topicName + '</a></td>' +
                                '<td>' + item.topicCode + '</td>' +
                                '<td>' + item.createdDate + '</td>' +
                                '<td>' + item.createdBy + '</td>' +
                                '<td>' + durationText + '</td>' +
                                '<td>' + item.outputStandardArr + '</td>' +
                                '<td id="' + item.syllabusStatus + '">' + item.syllabusStatus + '</td>' +
                                '<td>' +
                                '<div style="display: flex; justify-content: center">' +
                                '<button class="button-action">' +
                                '<a style="text-decoration: none; color: white" class="csv-button" href="http://localhost:8080/api/v1/syllabus/exportCSV/' + item.topicCode + '">Export CSV</a>' +
                                '</button>' +
                                '<button class="button-action">' +
                                '<a style="text-decoration: none; color: white" class="excel-button" href="http://localhost:8080/api/v1/syllabus/exportExcel/' + item.topicCode + '">Export Excel</a>' +
                                '</button>' +
                                '<div data-topic-code="' + item.topicCode + '">' +
                                divContainer.outerHTML +
                                '<input type="hidden" class="topicName3dot" name="topicName" value="' + item.topicName + '">' +
                                '</div>' +
                                '</div>' +
                                '</td>' +
                                // Add other columns here
                                '</tr>';
                        dataTable.append(row);
                        $(document).on('click', '.linkDetails', function () {
                          var topicCode = $(this).data('topic-code');
                          console.log("Clicked", topicCode);
                          localStorage.clear();
                          localStorage.setItem("topicCode", topicCode);
                          // Construct the URL with the input value
                          var url = '/general';

                          // Navigate to the destination page
                          window.location.href = url;
                        });

                      });

                      // Click 3dot
                      $(".threeDot").click(function () {
                        // Retrieve topicCode from the closest ancestor with data-topic-code
                        var topicCode = $(this).closest('[data-topic-code]').data('topic-code');
                        // Show modal dialog
                        $("#dialog-backdrop").css("display", "block");
                        $("#menu-syllabus-function-dialog")[0].showModal();
                        $("#menu-syllabus-function-dialog").attr("topicCode", topicCode);

                        var topicCode1 = $("#menu-syllabus-function-dialog").attr("topicCode");
                        console.log("TopicCode:", topicCode1);

                        var toolBar = document.querySelector(".pop-up-header-text1");
                        console.log(newTopicName);
                        toolBar.innerText = "Tool Bar";
                        toolBar.style.color = "white";
                        toolBar.style.weight = "bold";
                        toolBar.style.font = "Inter";
                        toolBar.style.margin = "0 40px 0 40px";
                        toolBar.style.whiteSpace = "nowrap";
                      });
                      //Click close
                      $(".close-menu-syllabus-dialog-button").click(function (event) {
                        event.preventDefault();
                        $("#menu-syllabus-function-dialog")[0].close();
                        hideBackdrop();
                      });
                      // Click edit in syllabus menu dialog
                      $(".frame-88").click(function (event) {
                        var topicCode1 = $("#menu-syllabus-function-dialog").attr("topicCode");
                        localStorage.setItem('topicCode', topicCode1);
                      });
                      function hideBackdrop() {
                        $("#dialog-backdrop").css("display", "none");
                      }

                      // Hiển thị nút paging theo số trang
                      var navidot = $('#navi-dot');
                      navidot.empty();
                      var newDiv;
                      for (var i = 1; i <= numberOfPage; i++) {
                        newDiv = $('<div>', {
                          'class': 'common-group',
                          'html': '<div class="common-container">' +
                                  '<div class="common-ellipse"></div>' +
                                  '<div class="_' + i + '" ' +
                                  'style="font: 700 12px Inter, sans-serif;' +
                                  'position: absolute; top: 4px; left: 8px">' + i + '</div>' +
                                  '</div>'
                        });
                        navidot.append(newDiv);
                      }
                    },
                    error: function (error) {
                      // alert(error);
                      // Xử lý lỗi khi gửi yêu cầu
                      if (error.status === 401) {
                        // Trường hợp lỗi 401: Unauthorized
                        // Gửi yêu cầu refreshToken để lấy accessToken mới
                        var refreshToken = getCookie("refreshToken");
                        $.ajax({
                          url: "http://localhost:8080/api/v1/auth/refreshToken",
                          method: "POST",
                          data: JSON.stringify({ refreshToken: refreshToken }), // Đặt refreshToken vào phần thân của yêu cầu
                          contentType: "application/json", // Xác định kiểu dữ liệu của yêu cầu
                          xhrFields: {
                            withCredentials: true
                          },
                          success: function (response) {
                            //Xóa cookie cũ (accessToken)
                            deleteCookie("accessToken");
                            // Lưu accessToken mới vào cookie
                            var accessTokenV2 = response.payload.accessToken;

                            setCookie("accessToken",accessTokenV2 , 1); // Ví dụ: thời gian sống 1 giờ

                            // // Xóa cookie cũ (refreshToken)
                            // deleteCookie("refreshToken");

                            // Gửi lại yêu cầu gốc với accessToken mới
                            sendSearchRequest(searchKeywords);
                          },
                          error: function (refreshError) {
                            if (refreshError.status === 403) {
                              // Trường hợp lỗi 403: Forbidden
                              // Chuyển hướng trình duyệt đến trang khác (ví dụ: http://localhost:8081/logout
                              // )
                              window.location.href = "http://localhost:8081/logout" +
                                      "";
                            } else {
                              alert("Refresh token failed: " + refreshError);
                              // Xử lý lỗi khác khi refreshToken không thành công
                              window.location.href = "http://localhost:8081/logout" +
                                      "";

                            }
                          }
                        });
                      } else {
                        alert("Error: " + error.status);
                        // Xử lý lỗi khác (không phải lỗi 401)
                        // window.location.href = "http://localhost:8081/logout
                        // ";
                      }

                      //
                    }
                  });
                }
              }
              //  NẾU CÓ DATE
              else {
                tagNum++;
                mode = 2;
                console.log(formattedDate + " là date hiện tại");
                if (mode === 2) {
                  let search = document.getElementById("search-keyword");
                  let item = document.createElement("div");
                  item.className = "search-item";
                  const keyword = input.value.trim();
                  item.innerHTML += `
                ${keyword}
                <span>&#10005;</span>
            `
                  search.appendChild(item);
                  searchKeywords.push(keyword);
                  // Gọi hàm sendSearchRequest để gửi yêu cầu AJAX
                  var combo1 = document.getElementById("rowPerPage");
                  combo1.addEventListener("change", function () {
                    selectedValue = combo1.value; // Lấy giá trị đã chọn
                    if (selectedValue !== "" && !combo1.disabled) {
                      console.log("Giá trị đã chọn mode 2: " + selectedValue);
                      console.log("Giá trị searchKey mode 2: " + searchKeywords);
                      sendSearchRequest(searchKeywords, formattedDate);
                    } else {
                      console.log("Chưa chọn tùy chọn");
                    }
                  });
                  sendSearchRequest(searchKeywords, formattedDate);
                  console.log("Array: " + searchKeywords);
                  var navidot = $('#navi-dot');
                  //Lấy đúng phần tử được click vào
                  navidot.on("click", ".common-container", function (event) {
                    var clickedValue = $(event.currentTarget).find('.common-ellipse').next().text();
                    console.log("Clicked Value: " + clickedValue);
                    myVar = clickedValue;
                    if (mode == 2) {
                      sendSearchRequest(searchKeywords, formattedDate);
                    }
                  });

                  // XÓA TỪ KHÓA
                  let deleteButton = item.getElementsByTagName("span")[0];
                  deleteButton.addEventListener("click", () => {
                    tagNum--;
                    // Xóa từ khóa khỏi mảng searchedKeywords
                    const index = searchKeywords.indexOf(keyword);
                    if (index !== -1) {
                      searchKeywords.splice(index, 1);
                      if (searchKeywords.length == 0) {
                        inputCalendar.value = "";
                        input.value = "";
                        performAjaxRequest();
                      } else
                        sendSearchRequest(searchKeywords);
                    }
                    item.remove();
                  });
                }

                sendSearchRequest(searchKeywords, formattedDate);
                console.log("mode " + mode);
                // Hàm gửi yêu cầu AJAX với từ khóa tìm kiếm
                function sendSearchRequest(searchKeywords, formattedDate) {
                  var url = "";
                  myVar = 1;
                  var encodedKeywords = encodeURIComponent(searchKeywords);
                  if (searchKeywords.length > 0) {
                    url = `http://localhost:8080/api/v1/syllabus/search-syllabus-byCreatedDate/` + selectedValue + `?key=` + encodedKeywords + `&date=` + formattedDate + '&page=' + myVar;
                  }
                  var accessToken = getCookie("accessToken");
                  $.ajax({
                    url: url,
                    method: "GET",
                    headers: {
                      "Authorization": "Bearer " + accessToken // Sử dụng Bearer token nếu cần
                    },
                    xhrFields: {
                      withCredentials: true
                    },
                    success: function (data) {
                      console.log("DATA 2: " + data);
                      // Xử lý dữ liệu và cập nhật bảng
                      var dataTable = $('#data-table');
                      dataTable.empty();
                      // Lặp qua dữ liệu và thêm từng dòng vào bảng
                      $.each(data, function (index, item) {
                        numberOfPage = item.count;
                        console.log("Search page number: " + item.count);
                        var durationText = item.duration + " days";

                        var row = '<tr>' +
                                '<td><a class="linkDetails" style="text-decoration: none;" data-topic-code="'+ item.topicCode + '">' + item.topicName + '</a></td>' +
                                '<td>' + item.topicCode + '</td>' +
                                '<td>' + item.createdDate + '</td>' +
                                '<td>' + item.createdBy + '</td>' +
                                '<td>' + durationText + '</td>' +
                                '<td>' + item.outputStandardArr + '</td>' +
                                '<td id="' + item.syllabusStatus + '">' + item.syllabusStatus + '</td>' +
                                '<td>' +
                                '<div style="display: flex; justify-content: center">' +
                                '<button class="button-action">' +
                                '<a style="text-decoration: none; color: white" class="csv-button" href="http://localhost:8080/api/v1/syllabus/exportCSV/' + item.topicCode + '">Export CSV</a>' +
                                '</button>' +
                                '<button class="button-action">' +
                                '<a style="text-decoration: none; color: white" class="excel-button" href="http://localhost:8080/api/v1/syllabus/exportExcel/' + item.topicCode + '">Export Excel</a>' +
                                '</button>' +
                                '<div data-topic-code="' + item.topicCode + '">' +
                                divContainer.outerHTML +
                                '<input type="hidden" class="topicName3dot" name="topicName" value="' + item.topicName + '">' +
                                '</div>' +
                                '</div>' +
                                '</td>' +
                                // Add other columns here
                                '</tr>';
                        dataTable.append(row);

                        $(document).on('click', '.linkDetails', function () {
                          var topicCode = $(this).data('topic-code');
                          console.log("Clicked", topicCode);
                          localStorage.clear();
                          localStorage.setItem("topicCode", topicCode);
                          // Construct the URL with the input value
                          var url = '/general';

                          // Navigate to the destination page
                          window.location.href = url;
                        });


                        $(document).on('click', '.linkDetails', function () {
                          var topicCode = $(this).data('topic-code');
                          console.log("Clicked", topicCode);
                          localStorage.clear();
                          localStorage.setItem("topicCode", topicCode);
                          // Construct the URL with the input value
                          var url = '/general';

                          // Navigate to the destination page
                          window.location.href = url;
                        });


                      });

                      // Click 3dot
                      $(".threeDot").click(function () {
                        // Retrieve topicCode from the closest ancestor with data-topic-code
                        var topicCode = $(this).closest('[data-topic-code]').data('topic-code');
                        // Show modal dialog
                        $("#dialog-backdrop").css("display", "block");
                        $("#menu-syllabus-function-dialog")[0].showModal();
                        $("#menu-syllabus-function-dialog").attr("topicCode", topicCode);

                        var topicCode1 = $("#menu-syllabus-function-dialog").attr("topicCode");
                        console.log("TopicCode:", topicCode1);

                        var toolBar = document.querySelector(".pop-up-header-text1");

                        console.log("Tool Bar");
                        toolBar.innerText = "Tool Bar";
                        toolBar.style.color = "white";
                        toolBar.style.weight = "bold";
                        toolBar.style.font = "Inter";
                        toolBar.style.margin = "0 40px 0 40px";
                        toolBar.style.whiteSpace = "nowrap";
                      });
                      //Click close
                      $(".close-menu-syllabus-dialog-button").click(function (event) {
                        event.preventDefault();
                        $("#menu-syllabus-function-dialog")[0].close();
                        hideBackdrop();
                      });
                      // Click edit in syllabus menu dialog
                      $(".frame-88").click(function (event) {
                        var topicCode1 = $("#menu-syllabus-function-dialog").attr("topicCode");
                        localStorage.setItem('topicCode', topicCode1);
                      });
                      function hideBackdrop() {
                        $("#dialog-backdrop").css("display", "none");
                      }

                      // Hiển thị nút paging theo số trang
                      var navidot = $('#navi-dot');
                      navidot.empty();
                      var newDiv;
                      for (var i = 1; i <= numberOfPage; i++) {
                        newDiv = $('<div>', {
                          'class': 'common-group',
                          'html': '<div class="common-container">' +
                                  '<div class="common-ellipse"></div>' +
                                  '<div class="_' + i + '" ' +
                                  'style="font: 700 12px Inter, sans-serif;' +
                                  'position: absolute; top: 4px; left: 8px">' + i + '</div>' +
                                  '</div>'
                        });
                        navidot.append(newDiv);
                      }
                    },
                    error: function (error) {
                      // alert(error);
                      // Xử lý lỗi khi gửi yêu cầu
                      if (error.status === 401) {
                        // Trường hợp lỗi 401: Unauthorized
                        // Gửi yêu cầu refreshToken để lấy accessToken mới
                        var refreshToken = getCookie("refreshToken");
                        $.ajax({
                          url: "http://localhost:8080/api/v1/auth/refreshToken",
                          method: "POST",
                          data: JSON.stringify({ refreshToken: refreshToken }), // Đặt refreshToken vào phần thân của yêu cầu
                          contentType: "application/json", // Xác định kiểu dữ liệu của yêu cầu
                          xhrFields: {
                            withCredentials: true
                          },
                          success: function (response) {
                            //Xóa cookie cũ (accessToken)
                            deleteCookie("accessToken");
                            // Lưu accessToken mới vào cookie
                            var accessTokenV2 = response.payload.accessToken;

                            setCookie("accessToken",accessTokenV2 , 1); // Ví dụ: thời gian sống 1 giờ

                            // // Xóa cookie cũ (refreshToken)
                            // deleteCookie("refreshToken");

                            // Gửi lại yêu cầu gốc với accessToken mới
                            sendSearchRequest(searchKeywords);
                          },
                          error: function (refreshError) {
                            if (refreshError.status === 403) {
                              // Trường hợp lỗi 403: Forbidden
                              // Chuyển hướng trình duyệt đến trang khác (ví dụ: http://localhost:8081/logout
                              // )
                              window.location.href = "http://localhost:8081/logout" +
                                      "";
                            } else {
                              alert("Refresh token failed: " + refreshError);
                              // Xử lý lỗi khác khi refreshToken không thành công
                              window.location.href = "http://localhost:8081/logout" +
                                      "";

                            }
                          }
                        });
                      } else {
                        alert("Error: " + error.status);
                        // Xử lý lỗi khác (không phải lỗi 401)
                        // window.location.href = "http://localhost:8081/logout
                        // ";
                      }

                      //
                    }
                  });
                }
              }//mode
              }
            }
      });

      //MODE 3
      var inputCalendar = document.getElementById("search-input-calendar");
      // Lắng nghe sự kiện khi người dùng nhấn Enter trong ô tìm kiếm
      inputCalendar.addEventListener("change", function(){
        var date = inputCalendar.value;
        var selectedDate = new Date(inputCalendar.value);
        var year = selectedDate.getFullYear();
        var month = (selectedDate.getMonth() + 1).toString().padStart(2, '0');
        var day = selectedDate.getDate().toString().padStart(2, '0');
        // Định dạng lại thành "yyyy/mm/dd"
        var formattedDate = year + '/' + month + '/' + day;

        if(formattedDate.trim() !== ""){
          mode = 3;
        }
        console.log(mode + " là mode hiện tại");
        if (mode === 3) {
          // Gọi hàm sendSearchRequest để gửi yêu cầu AJAX
          var combo1 = document.getElementById("rowPerPage");
          combo1.addEventListener("change", function () {
            selectedValue = combo1.value; // Lấy giá trị đã chọn
            if (selectedValue !== "" && !combo1.disabled) {
              console.log("Giá trị searchKey mode 3: " + formattedDate);
              sendDateRequest(formattedDate, searchKeywords);
            } else {
              console.log("Chưa chọn tùy chọn");
            }
          });
          sendDateRequest(formattedDate, searchKeywords);
          if(mode === 3){
            var navidot = $('#navi-dot');
            //Lấy đúng phần tử được click vào
            navidot.on("click", ".common-container", function (event) {
              var clickedValue = $(event.currentTarget).find('.common-ellipse').next().text();
              myVar = clickedValue;
              if(mode == 3) {
                sendDateRequest(formattedDate, searchKeywords);
              }
            });
          } else {
            console.log("not mode 3");
          }

          // Hàm gửi yêu cầu AJAX với ngày tìm kiếm
          function sendDateRequest(formattedDate, searchKeywords) {
            var encodedKeywords = encodeURIComponent(searchKeywords);
            var url = `http://localhost:8080/api/v1/syllabus/search-syllabus-byCreatedDate/` + selectedValue + `?key=` + encodedKeywords + `&date=` + formattedDate + '&page=' + myVar;
            var accessToken = getCookie("accessToken");
            $.ajax({
              url: url,
              method: "GET",
              headers: {
                "Authorization": "Bearer " + accessToken // Sử dụng Bearer token nếu cần
              },
              xhrFields: {
                withCredentials: true
              },
              success: function (data) {
                console.log("DATA 3: " + data);
                // Xử lý dữ liệu và cập nhật bảng
                var dataTable = $('#data-table');
                dataTable.empty();
                // Lặp qua dữ liệu và thêm từng dòng vào bảng
                $.each(data, function (index, item) {
                  numberOfPage = item.count;
                  var durationText = item.duration + " days";
                  var row = '<tr>' +
                          '<td><a class="linkDetails" style="text-decoration: none;" data-topic-code="'+ item.topicCode + '">' + item.topicName + '</a></td>' +
                          '<td>' + item.topicCode + '</td>' +
                          '<td>' + item.createdDate + '</td>' +
                          '<td>' + item.createdBy + '</td>' +
                          '<td>' + durationText + '</td>' +
                          '<td>' + item.outputStandardArr + '</td>' +
                          '<td id="' + item.syllabusStatus + '">' + item.syllabusStatus + '</td>' +
                          '<td>' +
                          '<div style="display: flex; justify-content: center">' +
                          '<button class="button-action">' +
                          '<a style="text-decoration: none; color: white" class="csv-button" href="http://localhost:8080/api/v1/syllabus/exportCSV/' + item.topicCode + '">Export CSV</a>'+
                          '</button>'+
                          '<button class="button-action">' +
                          '<a style="text-decoration: none; color: white" class="excel-button" href="http://localhost:8080/api/v1/syllabus/exportExcel/' + item.topicCode + '">Export Excel</a>' +
                          '</button>'+
                          '<div data-topic-code="'+item.topicCode+'">' +
                          divContainer.outerHTML +
                          '<input type="hidden" class="topicName3dot" name="topicName" value="'+item.topicName+'">' +
                          '</div>'+
                          '</div>' +
                          '</td>' +
                          // Add other columns here
                          '</tr>';
                  dataTable.append(row);
                  $(document).on('click', '.linkDetails', function () {
                    var topicCode = $(this).data('topic-code');
                    console.log("Clicked", topicCode);
                    localStorage.clear();
                    localStorage.setItem("topicCode", topicCode);
                    // Construct the URL with the input value
                    var url = '/general';

                    // Navigate to the destination page
                    window.location.href = url;
                  });

                });

                // Click 3dot
                $(".threeDot").click(function () {
                  // Retrieve topicCode from the closest ancestor with data-topic-code
                  var topicCode = $(this).closest('[data-topic-code]').data('topic-code');
                  // Show modal dialog
                  $("#dialog-backdrop").css("display", "block");
                  $("#menu-syllabus-function-dialog")[0].showModal();
                  $("#menu-syllabus-function-dialog").attr("topicCode", topicCode);

                  var topicCode1 = $("#menu-syllabus-function-dialog").attr("topicCode");
                  console.log("TopicCode:", topicCode1);

                  var toolBar = document.querySelector(".pop-up-header-text1");
                  var newTopicName = document.getElementById("topicName3dot").value;

                  console.log(newTopicName);
                  toolBar.innerText = newTopicName;
                  toolBar.style.color = "white";
                  toolBar.style.weight = "bold";
                  toolBar.style.font = "Inter";
                  toolBar.style.margin = "0 40px 0 40px";
                  toolBar.style.whiteSpace = "nowrap";
                });
                //Click close
                $(".close-menu-syllabus-dialog-button").click(function (event) {
                  event.preventDefault();
                  $("#menu-syllabus-function-dialog")[0].close();
                  hideBackdrop();
                });
                // Click edit in syllabus menu dialog
                $(".frame-88").click(function (event) {
                  var topicCode1 = $("#menu-syllabus-function-dialog").attr("topicCode");
                  localStorage.setItem('topicCode', topicCode1);
                });
                function hideBackdrop() {
                  $("#dialog-backdrop").css("display", "none");
                }

                // Hiển thị nút paging theo số trang
                var navidot = $('#navi-dot');
                navidot.empty();
                var newDiv;
                for (var i = 1; i <= numberOfPage; i++) {
                  newDiv = $('<div>', {
                    'class': 'common-group',
                    'html': '<div class="common-container">' +
                            '<div class="common-ellipse"></div>' +
                            '<div class="_' + i + '" ' +
                            'style="font: 700 12px Inter, sans-serif;' +
                            'position: absolute; top: 4px; left: 8px">' + i + '</div>' +
                            '</div>'
                  });
                  navidot.append(newDiv);
                }
              },
              error: function (error) {
                // alert(error);
                // Xử lý lỗi khi gửi yêu cầu
                if (error.status === 401) {
                  // Trường hợp lỗi 401: Unauthorized
                  // Gửi yêu cầu refreshToken để lấy accessToken mới
                  var refreshToken = getCookie("refreshToken");
                  $.ajax({
                    url: "http://localhost:8080/api/v1/auth/refreshToken",
                    method: "POST",
                    data: JSON.stringify({ refreshToken: refreshToken }), // Đặt refreshToken vào phần thân của yêu cầu
                    contentType: "application/json", // Xác định kiểu dữ liệu của yêu cầu
                    xhrFields: {
                      withCredentials: true
                    },
                    success: function (response) {
                      //Xóa cookie cũ (accessToken)
                      deleteCookie("accessToken");
                      // Lưu accessToken mới vào cookie
                      var accessTokenV2 = response.payload.accessToken;

                      setCookie("accessToken",accessTokenV2 , 1); // Ví dụ: thời gian sống 1 giờ

                      // // Xóa cookie cũ (refreshToken)
                      // deleteCookie("refreshToken");

                      // Gửi lại yêu cầu gốc với accessToken mới
                      sendDateRequest(formattedDate, searchKeywords);
                    },
                    error: function (refreshError) {
                      if (refreshError.status === 403) {
                        // Trường hợp lỗi 403: Forbidden
                        // Chuyển hướng trình duyệt đến trang khác (ví dụ: http://localhost:8081/logout
                        // )
                        window.location.href = "http://localhost:8081/logout" +
                                "";
                      } else {
                        alert("Refresh token failed: " + refreshError);
                        // Xử lý lỗi khác khi refreshToken không thành công
                        window.location.href = "http://localhost:8081/logout" +
                                "";

                      }
                    }
                  });
                } else {
                  alert("Error: " + error.status);
                  // Xử lý lỗi khác (không phải lỗi 401)
                  // window.location.href = "http://localhost:8081/logout
                  // ";
                }

                //
              }
            });
          }
        }//mode
      });
    });
    //Export

    function exportExcel(topicCode) {
      var url = `http://localhost:8080/api/v1/syllabus/exportExcel/`+topicCode;
      var accessToken = getCookie("accessToken");
      $.ajax({
        url: url,
        method: "GET",
        headers: {
          "Authorization": "Bearer " + accessToken // Sử dụng Bearer token nếu cần
        },
        xhrFields: {
          withCredentials: true
        },
        success: function (response) {
          console.log("response");
          console.log(url);
        },
        error: function (error) {
          // alert(error);
          // Xử lý lỗi khi gửi yêu cầu
          if (error.status === 401) {
            // Trường hợp lỗi 401: Unauthorized
            // Gửi yêu cầu refreshToken để lấy accessToken mới
            var refreshToken = getCookie("refreshToken");
            $.ajax({
              url: "http://localhost:8080/api/v1/auth/refreshToken",
              method: "POST",
              data: JSON.stringify({ refreshToken: refreshToken }), // Đặt refreshToken vào phần thân của yêu cầu
              contentType: "application/json", // Xác định kiểu dữ liệu của yêu cầu
              xhrFields: {
                withCredentials: true
              },
              success: function (response) {
                //Xóa cookie cũ (accessToken)
                deleteCookie("accessToken");
                // Lưu accessToken mới vào cookie
                var accessTokenV2 = response.payload.accessToken;

                setCookie("accessToken",accessTokenV2 , 1); // Ví dụ: thời gian sống 1 giờ

                // // Xóa cookie cũ (refreshToken)
                // deleteCookie("refreshToken");

                // Gửi lại yêu cầu gốc với accessToken mới
                exportExcel(topicCode);
              },
              error: function (refreshError) {
                if (refreshError.status === 403) {
                  // Trường hợp lỗi 403: Forbidden
                  // Chuyển hướng trình duyệt đến trang khác (ví dụ: http://localhost:8081/logout
                  // )
                  window.location.href = "http://localhost:8081/logout" +
                          "";
                } else {
                  alert("Refresh token failed: " + refreshError);
                  // Xử lý lỗi khác khi refreshToken không thành công
                  window.location.href = "http://localhost:8081/logout" +
                          "";

                }
              }
            });
          } else {
            alert("Error: " + error.status);
            // Xử lý lỗi khác (không phải lỗi 401)
            // window.location.href = "http://localhost:8081/logout
            // ";
          }
          //
        }
      });
    }
  </script>

<!--  Test datatable-->
<!--<script>-->
<!--  $(document).ready(function() {-->
<!--    // Cuộc gọi API để lấy dữ liệu-->
<!--    $.ajax({-->
<!--      url: 'http://localhost:8080/api/v1/syllabus/list-syllabus/15?page=1',-->
<!--      type: 'GET',-->
<!--      success: function(data) {-->
<!--        // Áp dụng DataTable cho bảng-->
<!--        var dataTable = $('#user-information-table').DataTable({-->
<!--          data: data,-->
<!--          columns: [-->
<!--            { data: 'column1' },-->
<!--            { data: 'column2' },-->
<!--            { data: 'column1' },-->
<!--            { data: 'column2' },-->
<!--            { data: 'column1' },-->
<!--            { data: 'column2' },-->
<!--            { data: 'column1' },-->
<!--            { data: 'column2' },-->
<!--            // Thêm các cột khác tại đây-->
<!--          ]-->
<!--        });-->
<!--      },-->
<!--      error: function(error) {-->
<!--        console.error('Error fetching data from API:', error);-->
<!--      }-->
<!--    });-->
<!--  });-->

<!--</script>-->


  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="/js/common.js"></script>
  <script>
      $(document).ready(function () {
        var createSyllabusBtn = document.getElementById("createSyllabusBtn1");
        createSyllabusBtn.addEventListener("click", function () {
          localStorage.clear();
          console.log("Button clicked!");
        });

      });
  </script>
  <!--   Pop-up window-->
  <script>
    function getUserTableData(){
      $.ajax({
        url: "https://localhost:8080/api/v1/syllabus",
        method: "GET",
        success: function (response) {
          let tableData = [];
          response.forEach(element => {
            let elementArr = [];
            elementArr.push(element.name);
            elementArr.push(element.email);
            elementArr.push(element.dob);
            elementArr.push(element.gender);
            elementArr.push(element.userPermission);
            tableData.push(elementArr);
          });
          $("#user-information-table").DataTable().clear().rows.add(tableData).draw()
        },
        error: function(error){
          alert(error)
        }
      });
    };
    $("#filter-form").submit(function (event) {
      event.preventDefault();
      console.log($(this).serializeArray());
      var arr1 = $(this).serializeArray();
      var keyValues = {};
      $.each(arr1, function (index, item) {
        // Use the "name" as the key and "value" as the value
        var key = item.name;
        var value = item.value;
        // Check if the key already exists, if so, create an array to store values
        if (keyValues.hasOwnProperty(key)) {
          keyValues[key].push(value);
        } else {
          if (key.endsWith("List")) {
            keyValues[key] = [];
            keyValues[key].push(value);
          } else {
            if (value !== "") {
              keyValues[key] = value;
            }
          }
        }
      });
      console.log(JSON.stringify(keyValues));
    });
    $("#reset-filter-option-dialog-button").click(function (event) {
      $("#filter-class-location").val(null).trigger("change");
    });
    $("#cancel-filter-option-dialog-button").click(function (event) {
      $("#filter-class-location").val(null).trigger("change");
      $("#filter-option-dialog")[0].close();
    });
    $("#open-import-syllabus-dialog-button").click(() => {
      $("#dialog-backdrop").css("display", "block");
      $("#import-syllabus-dialog")[0].showModal();
    });
    $("#toggle-user-status").click(function () {
      $(this).prop("disabled", true);
      if ($("#user-status-label")[0].textContent === "Active") {
        $("#user-status-label")[0].textContent = "Inactive";
      } else {
        $("#user-status-label")[0].textContent = "Active";
      }
      setTimeout(() => {
        $(this).prop("disabled", false);
      }, 150);
    });
    $("#import-syllabus-form").submit(function (event) {
      event.preventDefault();
      $(".is-invalid").removeClass("is-invalid")
      $(".invalid-feedback").text("");
      let arr1 = $(this).serializeArray();
      let keyValues = {}
      let isValid = true;
      $.each(arr1, function (index, item) {
        let key = item.name;
        let value = item.value;
        if (key === "name" && value.trim().length === 0) {
          $("#invalid-user-name").text("Invalid username");
          $("#input-user-name").addClass("is-invalid");
          isValid=false;
        }
        if (key === "email" && !value.trim().match(/^[a-z0-9]+@\w+\.\w+$/)) {
          $("#invalid-email-address").text("Invalid email address");
          $("#input-user-email-address").addClass("is-invalid");
          isValid=false;
        }
        if (key === "phone" && !value.trim().match(/[0-9]{10}/)) {
          $("#invalid-phone-number").text("Invalid phone number");
          $("#input-user-phone").addClass("is-invalid");
          isValid=false;
        }
        if (key === "dob" && value.trim().length === 0) {
          $("#invalid-date-of-birth").text("Invalid date of birth");
          $("#pick-date-of-birth").addClass("is-invalid");
          isValid=false
        }
        if (value==="true") {
          value = true
        }
        if (value==="false"){
          value = false
        }
        keyValues[key] = value;
      });
      if (isValid){
        console.log(JSON.stringify(keyValues));
        $.ajax({
          url:"https://localhost:8080/api/v1/users",
          method:"POST",
          contentType:"application/json; charset=utf-8",
          data: JSON.stringify(keyValues),
          success: function(){
            alert("Success");
            $("#import-syllabus-dialog")[0].close();
            getUserTableData();
          },
          error:function(error){
            console.log(error);
          }
        });
      }
    });
    $("#input-user-name").click(function () {
      $(this).removeClass("is-invalid");
    });
    $("#input-user-email-address").click(function () {
      $(this).removeClass("is-invalid");
    });
    $("#input-user-phone").click(function () {
      $(this).removeClass("is-invalid");
    });
    $("#pick-date-of-birth").click(function () {
      $(this).removeClass("is-invalid");
    });
    $(".close-import-syllabus-dialog-button").click(function (event) {
      event.preventDefault();
      $(".is-invalid").removeClass("is-invalid")
      $(".invalid-feedback").text("");
      $("#import-syllabus-form")[0].reset();
      $("#import-syllabus-dialog")[0].close();
      hideBackdrop();
    });
    function hideBackdrop() {
      $("#dialog-backdrop").css("display", "none");
    }
  </script>

<!--  Check max length file-->
  <script>
    function deleteCookie(name) {
      document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
    }
    function getCookie(name) {
      var cookieArray = document.cookie.split("; ");
      for (var i = 0; i < cookieArray.length; i++) {
        var cookie = cookieArray[i].split("=");
        if (cookie[0] === name) {
          return cookie[1];
        }
      }
      return null;
    }
    function setCookie(name, value, hours) {
      var date = new Date();
      date.setTime(date.getTime() + (hours * 60 * 60 * 1000)); // Thời gian sống tính bằng mili giây

      var expires = "expires=" + date.toUTCString();
      document.cookie = name + "=" + value + ";" + expires + ";path=/";
    }
    var fileName = "";
    $(document).ready(function () {
      $("#fileInput").change(function() {
        fileName = $(this).val().split("\\").pop();
        $("#selectedFileName").text(fileName);
      });

      $('#import-syllabus-btn').on('click', function () {
        var input = document.getElementById('fileInput');
        var file1 = input.files[0];
        if(input.files.length === 0) {
          showWarning();
        }
        if(checkFileSize()){
          showError("File size exceeds the maximum limit (25MB).");
        }
        if(checkFileExtension(fileName, ['xlsx'])) {
          importSyllabusAPI(file1);
          $("#fileInput").val("");
          $("#selectedFileName").text("");
        }else {
          showError("Wrong file format.");
        }
      });
      function checkFileSize() {
        var input = document.getElementById('fileInput');
        if (input.files.length > 0) {
          var fileSize = input.files[0].size;
          var maxSize = 25 * 1024 * 1024;
          if (fileSize > maxSize) {
            return true;
          }
        }
        return false;
      }
      function checkFileExtension(fileName, allowedExtensions) {
        var fileExtension = fileName.split('.').pop().toLowerCase();
        console.log(fileExtension);
        return allowedExtensions.some(ext => ext === fileExtension);
      }
      function showError(message) {
        var errorToast = document.querySelector('.toast.error');
        var loadingBar1 = errorToast.querySelector('.loading1');
        var errorText = errorToast.querySelector('.container-2Text p:last-child');

        errorText.textContent = message;

        errorToast.style.opacity = '1';
        loadingBar1.classList.add('active');

        setTimeout(function() {
          loadingBar1.classList.remove('active');
          errorToast.style.opacity = '0';
        }, 2500);
      }

      function showSuccess(message){
        var successToast = document.querySelector('.toast.success');
        var loadingBar1 = successToast.querySelector('.loadingSucces');
        var successText = successToast.querySelector('.container-2Text p:last-child');

        successText.textContent = message;
        successToast.style.opacity = '1';
        loadingBar1.classList.add('active');

        setTimeout(function () {
          loadingBar1.classList.remove('active');
          successToast.style.opacity = "0";
        }, 2500);
      }
      function showWarning(){
        var warningToast = document.querySelector('.toast.warning');
        var loadingBar1 = warningToast.querySelector('.loadingWarning');
        warningToast.style.opacity = '1';
        loadingBar1.classList.add('active');

        setTimeout(function () {
          loadingBar1.classList.remove('active');
          warningToast.style.opacity = "0";
        }, 2500);
      }

      $("#cancel-import-syllabus-btn").on('click', function () {
        $("#fileInput").val("");
        $("#selectedFileName").text("");
      });

      function importSyllabusAPI(fileName) {
        var formData = new FormData();
        formData.append('file', fileName);
        var accessToken = getCookie("accessToken");
        $.ajax({
          url: 'http://localhost:8080/api/v1/syllabus/importExcel',
          data: formData,
          processData: false,
          contentType: false,
          // beforeSend: function(xhr) {
          //   xhr.setRequestHeader('Authorization', 'Basic c3lzYWRtaW46cGFzc3dvcmQtMQ==');
          // },
          type: 'POST',
          headers: {
            "Authorization": "Bearer " + accessToken // Sử dụng Bearer token nếu cần
          },
          xhrFields: {
            withCredentials: true
          },
          success: function(result) {
            console.log(result);
            showSuccess("Import successfully.");
            return result;
          },
          error: function(xhr) {
            if (xhr.status === 400) {
              showError("Topic code or Topic name is already exist");
            }
            if (xhr.status === 500) {
              showError("Fail to import file!");
            }
          },
          error: function (error) {
            // alert(error);
            // Xử lý lỗi khi gửi yêu cầu
            if (error.status === 401) {
              // Trường hợp lỗi 401: Unauthorized
              // Gửi yêu cầu refreshToken để lấy accessToken mới
              var refreshToken = getCookie("refreshToken");
              $.ajax({
                url: "http://localhost:8080/api/v1/auth/refreshToken",
                method: "POST",
                data: JSON.stringify({ refreshToken: refreshToken }), // Đặt refreshToken vào phần thân của yêu cầu
                contentType: "application/json", // Xác định kiểu dữ liệu của yêu cầu
                xhrFields: {
                  withCredentials: true
                },
                success: function (response) {
                  //Xóa cookie cũ (accessToken)
                  deleteCookie("accessToken");
                  // Lưu accessToken mới vào cookie
                  var accessTokenV2 = response.payload.accessToken;

                  setCookie("accessToken",accessTokenV2 , 1); // Ví dụ: thời gian sống 1 giờ

                  // // Xóa cookie cũ (refreshToken)
                  // deleteCookie("refreshToken");

                  // Gửi lại yêu cầu gốc với accessToken mới
                  importSyllabusAPI(fileName);
                },
                error: function (refreshError) {
                  if (refreshError.status === 403) {
                    // Trường hợp lỗi 403: Forbidden
                    // Chuyển hướng trình duyệt đến trang khác (ví dụ: http://localhost:8081/logout
                    // )
                    window.location.href = "http://localhost:8081/logout" +
                            "";
                  } else {
                    alert("Refresh token failed: " + refreshError);
                    // Xử lý lỗi khác khi refreshToken không thành công
                    window.location.href = "http://localhost:8081/logout" +
                            "";

                  }
                }
              });
            } else {
              alert("Error: " + error.status);
              // Xử lý lỗi khác (không phải lỗi 401)
              // window.location.href = "http://localhost:8081/logout
              // ";
            }

            //
          }
        });
      }
    });
  </script>
  <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
  <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
</div>
</body>
</html>